(function(t){function e(e){for(var s,r,n=e[0],l=e[1],d=e[2],u=0,m=[];u<n.length;u++)r=n[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&m.push(i[r][0]),i[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);c&&c(e);while(m.length)m.shift()();return o.push.apply(o,d||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],s=!0,n=1;n<a.length;n++){var l=a[n];0!==i[l]&&(s=!1)}s&&(o.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},i={app:0},o=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var d=0;d<n.length;d++)e(n[d]);var c=l;o.push(["6d40","chunk-vendors"]),a()})({"03c7":function(t,e,a){},2172:function(t,e,a){t.exports=a.p+"img/book_coffee.1c1d0d73.jpg"},3285:function(t,e,a){},"3a12":function(t,e,a){"use strict";a("6f49")},"3e96":function(t,e,a){"use strict";a("48a3")},"44be":function(t,e,a){t.exports=a.p+"img/app_logo_t.fec3617b.png"},"48a3":function(t,e,a){},"4d05":function(t,e,a){t.exports=a.p+"img/books_new.c55573b0.jpg"},6426:function(t,e,a){"use strict";var s=a("f8f4"),i=a("fb70"),o=a("2877"),r=Object(o["a"])(i["default"],s["a"],s["b"],!1,null,null,null);e["default"]=r.exports},"6d40":function(t,e,a){"use strict";a.r(e);var s=a("2b0e"),i=a("bc3a"),o=a.n(i),r=a("a7fe"),n=a.n(r),l=a("5886"),d=a("1321"),c=a.n(d),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("Header"),a("v-main",[a("router-view")],1),a("Footer")],1)},m=[],p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("v-card",{staticStyle:{"margin-bottom":"15px"},attrs:{flat:"",tile:""}},[s("v-app-bar",{attrs:{color:"#913608",dark:""}},[s("router-link",{attrs:{to:"/"}},[s("v-app-bar-nav-icon",[s("v-img",{attrs:{alt:"App logo",src:a("44be"),width:"90px"}})],1)],1),s("v-toolbar-title",{staticClass:"d-none d-sm-flex",staticStyle:{"padding-left":"15px","font-family":"Brush Script MT","font-size":"30px"}},[t._v("Biblioteka")]),s("v-spacer"),s("div",{staticClass:"hidden-sm-and-down justify-center align-center"},t._l(t.items,(function(e){return s("v-menu",{key:e.text,attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.attrs,o=a.on;return[s("v-btn",t._g(t._b({staticClass:"white--text ma-8 font-weight-bold",attrs:{outlined:"",rounded:"",to:e.route}},"v-btn",i,!1),o),[t._v(" "+t._s(e.text)+" ")])]}}],null,!0)})})),1),s("v-spacer"),t.loggedUser.card_number?s("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-badge",{attrs:{content:t.messages,value:t.messages,color:"#008D18",overlap:""}},[s("v-btn",t._g({attrs:{icon:"",disabled:!t.messages}},a),[s("v-icon",[t._v("mdi-email")])],1)],1)]}}],null,!1,1346161984)},[s("v-card",[t._l(t.notifications,(function(e){return s("v-list",{key:e.id,staticStyle:{width:"480px","padding-top":"0px","padding-bottom":"0px"},attrs:{dense:""}},[t._l(e.data,(function(e){return s("v-list-item-content",{key:e.id,staticStyle:{"margin-left":"10px"}},[e.id?s("router-link",{staticStyle:{"text-decoration":"none",color:"#008D18"},attrs:{to:{name:"bookview",params:{book_id:e.id}}}},[s("v-subheader",{domProps:{textContent:t._s(e.message)}}),s("v-list-item-group",[s("v-list-item",[s("v-list-item-icon",[s("v-icon",{staticStyle:{display:"inline-block"},attrs:{"x-large":""}},[t._v("mdi-book-open-page-variant")])],1),s("v-list-item-content",[s("v-list-item-title",{staticStyle:{"white-space":"normal"}},[t._v("Właśnie została dodana książka pod tytułem: "),s("strong",[t._v(t._s(e.title))])]),t._l(e.author,(function(e){return s("v-list-item-subtitle",{key:e.id},[t._v(" Autor: "+t._s(e.name)+" "+t._s(e.surname)+" ")])}))],2)],1)],1)],1):t._e()],1)})),s("v-divider")],2)})),s("v-divider"),s("v-card-actions",{staticStyle:{"justify-content":"center"}},[s("v-btn",{staticClass:"white--text",attrs:{color:"#008D18"},on:{click:function(e){return t.markAsRead()}}},[t._v(" Oznacz jako przeczytane ")])],1)],2)],1):t._e(),s("About"),t.loggedUser.id_number?s("router-link",{attrs:{to:"/admin-panel"}},[s("v-btn",{attrs:{icon:""}},[s("v-icon",{attrs:{large:""}},[t._v("mdi-view-dashboard")])],1)],1):t._e(),t.isLoggedIn?t._e():s("router-link",{attrs:{to:"/login"}},[s("v-btn",{attrs:{icon:""}},[s("v-icon",{attrs:{large:""}},[t._v("mdi-login")])],1)],1),s("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-btn",t._g({attrs:{icon:"",disabled:!t.isLoggedIn}},a),[s("v-icon",[t._v("mdi-account")])],1)]}}])},[s("v-list",[t.loggedUser.card_number?s("v-list-item",{attrs:{to:{name:"profile",params:{user_id:t.authId}}}},[s("v-list-item-icon",[s("v-icon",[t._v("mdi-account")])],1),s("v-list-item-content",[s("v-list-item-title",[t._v("Profil")])],1)],1):t._e(),s("v-list-item",[s("v-list-item-icon",[s("v-icon",[t._v("mdi-logout")])],1),s("v-list-item-content",[t.isLoggedIn?s("v-list-item-title",[s("a",{on:{click:t.logout}},[t._v("Wyloguj się")])]):t._e()],1)],1)],1)],1),s("div",{staticClass:"hidden-sm-and-up justify-center align-center"},[s("v-dialog",{attrs:{"hide-overlay":"",transition:"dialog-bottom-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,i=e.attrs;return[s("v-btn",t._g(t._b({attrs:{color:"#913608"}},"v-btn",i,!1),a),[s("v-icon",[t._v("mdi-hamburger")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-toolbar",{attrs:{dark:"",color:"#913608"}},[s("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){t.dialog=!1}}},[s("v-icon",[t._v("mdi-close")])],1),s("v-toolbar-title",[t._v("MENU")]),s("v-spacer")],1),t._l(t.items,(function(e){return s("v-list",{key:e.text,attrs:{"prepend-icon":e.action}},[s("v-list-item",[s("v-list-item-content",[s("v-list-item",{attrs:{to:e.route}},[s("v-icon",[t._v(t._s(e.action))]),t._v(" "+t._s(e.text)+" ")],1)],1)],1)],1)}))],2)],1)],1)],1)],1)],1)},h=[],v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-center"},[s("v-dialog",{attrs:{width:"620"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-btn",t._g({attrs:{icon:""}},a),[s("v-icon",{attrs:{large:""}},[t._v("mdi-information-outline")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-toolbar",{attrs:{color:"#A53D09"}},[s("v-toolbar-title",{staticClass:"headline lighten-2 white--text"},[t._v("O aplikacji")])],1),s("v-row",{staticStyle:{margin:"0"}},[s("v-col",{staticStyle:{padding:"0"},attrs:{md:"5",id:"image"}},[s("v-img",{attrs:{src:a("2172"),dark:""}})],1),s("v-col",{attrs:{md:"7"}},[s("v-card-text",{staticClass:"pt-5 text-center"},[s("span",[t._v("Aplikacja webowa służy do wspomagania funkcjonowania biblioteki oraz usprawnienia jej działania. Oferuje ona wiele przydatnych opcji dla pracowników placówki w kwestii zarządzania danymi. Czytelnicy natomiast mogą przeglądać pozycje książkowe znajdujące się w bibliotece, dodatkowo mogą obserwować ulubionych autorów w celu otrzymania powiadomienia o dodaniu nowej książki jednego z nich. Oprócz tego do dyspozycji mają statystyki konta, ranking miesięczny czytelników czy kalendarz wydarzeń.")])])],1)],1)],1)],1)],1)},f=[],g={name:"About",data(){return{dialog:!1}}},b=g,y=(a("d2cf"),a("2877")),w=Object(y["a"])(b,v,f,!1,null,null,null),k=w.exports,x={name:"Main",components:{About:k},data:()=>({dialog:!1,items:[{action:"mdi-calendar-check",text:"KALENDARZ",route:"/calendar"},{action:"mdi-magnify",text:"PRZEGLĄDAJ",route:"/search"},{action:"mdi-new-box",text:"NOWOŚCI",route:"/new"},{action:"mdi-trophy",text:"RANKING",route:"/ranking"}],notifications:[]}),computed:{isLoggedIn(){return 0!==this.$store.getters.isLoggedIn.length&&this.getNotifications(),this.$store.getters.isLoggedIn},loggedUser(){return this.$store.getters.loggedUser},authId(){return this.$store.getters.authId},messages(){let t=0;for(const e in this.notifications)null!=this.notifications[e]&&t++;return t}},methods:{getNotifications(){o.a.get("/api/notifications/"+this.authId).then(t=>{this.notifications=t.data})},markAsRead(){o.a.get("/api/notifications/read/"+this.authId),this.notifications=null},logout(){this.$store.dispatch("logout").then(()=>this.$router.push({name:"login"}));const t=this.$swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,didOpen:t=>{t.addEventListener("mouseenter",this.$swal.stopTimer),t.addEventListener("mouseleave",this.$swal.resumeTimer)}});t.fire({icon:"success",title:"Wylogowano!"}),this.notifications=null}}},_=x,j=(a("7f6d"),Object(y["a"])(_,p,h,!1,null,"137f8458",null)),z=j.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("v-footer",{staticStyle:{"text-align":"center","margin-top":"15px"},attrs:{color:"#913608",padless:""}},[a("v-card",{staticClass:"white--text",staticStyle:{"background-color":"#913608",width:"100%"},attrs:{flat:"",tile:""}},[a("v-card-text",t._l(t.icons,(function(e){return a("v-btn",{key:e.name,staticClass:"mx-4 white--text",attrs:{icon:"",href:e.link}},[a("v-icon",{attrs:{size:"24px"}},[t._v(" "+t._s(e.name)+" ")])],1)})),1),a("v-card-text",{staticClass:"white--text pt-0"},[a("v-icon",{staticClass:"white--text",attrs:{size:"14px"}},[t._v("mdi-copyright")]),t._v(" Wszelkie prawa zastrzeżone. ")],1),a("v-divider",{staticStyle:{"margin-bottom":"0px"}}),a("v-card-text",{staticClass:"white--text",staticStyle:{"background-color":"black"}},[t._v(" "+t._s((new Date).getFullYear())+" — "),a("strong",[t._v("Biblioteka")])])],1)],1)],1)},I=[],$={name:"Footer",data:()=>({icons:[{name:"mdi-facebook",link:"https://www.facebook.com/"},{name:"mdi-twitter",link:"https://www.twitter.com/"},{name:"mdi-linkedin",link:"https://www.linkedin.com/"},{name:"mdi-instagram",link:"https://www.instagram.com/"}]})},S=$,R=(a("3e96"),Object(y["a"])(S,C,I,!1,null,"1ba06eb0",null)),B=R.exports,D={name:"App",components:{Header:z,Footer:B}},A=D,T=Object(y["a"])(A,u,m,!1,null,"027abf3b",null),E=T.exports,P=a("ce5b"),O=a.n(P);s["default"].use(O.a);const N={};var W=new O.a(N),L=a("8c4f"),U=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login",attrs:{id:"login"}},[s("v-container",[s("v-row",{staticClass:"logform"},[s("v-row",{staticClass:"justify-lg-end justify-sm-center pr-5 d-none d-sm-flex col-md-5"},[s("v-img",{staticClass:"shrink",attrs:{alt:"App Logo",contain:"",src:a("6f0f")}})],1),s("v-divider",{attrs:{vertical:""}}),s("v-col",{staticClass:"form",attrs:{cols:"12",md:"7"}},[s("v-card",{staticClass:"ma-2",attrs:{"max-width":"600"}},[s("v-form",{ref:"form",attrs:{md:"6"},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("h1",{staticClass:"pt-8",staticStyle:{"text-align":"center"}},[t._v("Biblioteka")]),s("v-text-field",{staticClass:"pa-5 pb-0",attrs:{rules:t.loginRules,label:"Numer karty bibliotecznej",outlined:"",required:""},model:{value:t.login,callback:function(e){t.login=e},expression:"login"}}),s("v-text-field",{staticClass:"pa-5 pt-0",attrs:{value:t.password,label:"Hasło","append-icon":t.value?"mdi-eye":"mdi-eye-off",type:t.value?"password":"text",rules:[t.rules.password],outlined:"",required:""},on:{"click:append":function(){return t.value=!t.value},input:function(e){return t.password=e}}}),s("v-row",{staticClass:"pb-5 justify-center",attrs:{id:"buttons"}},[s("v-btn",{staticClass:"white--text mr-5 mb-6 font-weight-bold",attrs:{disabled:!t.valid,color:"#008D18"},on:{click:t.validate}},[t._v(" Zaloguj się ")]),s("v-btn",{staticClass:"white--text mr-5 mb-6 font-weight-bold",attrs:{color:"#808080"},on:{click:t.reset}},[t._v(" Wyczyść dane ")])],1),s("v-row",{staticClass:"pb-5 justify-center"},[s("router-link",{staticStyle:{"text-decoration":"none",color:"#008D18"},attrs:{to:{name:"reset-password"}}},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("Nie pamiętam hasła")])])],1)],1)],1)],1)],1)],1)],1)},Z=[],q={name:"Login",data(){return{password:"",valid:!0,value:!0,login:"",loginRules:[t=>!!t||"Login jest wymagany",t=>/^\d+$/.test(t)||"Login musi być prawidłowy",t=>t.length>=10&&t.length<=12||"Login powinien zawierać odpowiednią ilość cyfr"],rules:{required:t=>!!t||"Hasło jest wymagane",password:t=>{const e=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})/;return e.test(t)||"8 znaków, co najmniej jedna wielka litera, cyfra oraz znak specjalny"}}}},methods:{validate(){if(this.$refs.form.validate()){const t={login:this.login,password:this.password};this.$store.dispatch("login",t).then(()=>{const t=this.$swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,didOpen:t=>{t.addEventListener("mouseenter",this.$swal.stopTimer),t.addEventListener("mouseleave",this.$swal.resumeTimer)}});t.fire({icon:"success",title:"Zalogowano!"})}).catch(t=>{this.$swal("Błąd","Nieprawidłowy login lub hasło!","error")})}},reset(){this.$refs.form.reset()}}},F=q,M=(a("b610"),Object(y["a"])(F,U,Z,!1,null,"4bf4b047",null)),G=M.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",t._l(t.cards,(function(e){return a("v-col",{key:e.title,attrs:{md:e.flex}},[a("v-card",[a("v-img",{staticClass:"white--text align-end",attrs:{src:e.src,gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",height:"400px"}},[a("v-btn",{staticStyle:{border:"0px","text-decoration":"none"},attrs:{outlined:"",to:e.route}},[a("v-card-title",{staticStyle:{color:"white","font-weight":"bold"},domProps:{textContent:t._s(e.title)}})],1)],1)],1)],1)})),1)],1)},H=[],Y={data:()=>({cards:[{title:"Kalendarz wydarzeń",src:a("998f"),route:"/calendar",flex:6},{title:"Przeglądaj książki",src:a("eabb"),route:"/search",flex:6},{title:"Nowe pozycje",src:a("4d05"),route:"/new",flex:6},{title:"Ranking miesięczny",src:a("f7e3"),route:"/ranking",flex:6}]})},V=Y,J=(a("ad8c"),Object(y["a"])(V,K,H,!1,null,"0e4ededc",null)),X=J.exports,Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"register"},[a("v-container",[a("v-row",{staticClass:"justify-center justify-md-center align-center"},[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-card",{staticClass:"ma-2"},[a("v-form",{ref:"form",attrs:{md:"6"},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-col",[a("h1",{staticClass:"pt-8",staticStyle:{"text-align":"center"}},[t._v("Biblioteka")]),a("h2",{staticClass:"pt-2",staticStyle:{"text-align":"center"}},[t._v("Tworzenie konta czytelnika")])]),a("hr"),a("v-col",{staticStyle:{display:"inline-flex","padding-bottom":"0px"},attrs:{cols:"12"}},[a("v-text-field",{staticClass:"pa-5 pb-0",attrs:{rules:t.nameRules,label:"Imię",outlined:"",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("v-text-field",{staticClass:"pa-5 pb-0",attrs:{rules:t.surnameRules,label:"Nazwisko",outlined:"",required:""},model:{value:t.surname,callback:function(e){t.surname=e},expression:"surname"}})],1),a("v-col",{staticStyle:{display:"inline-flex","padding-bottom":"0px","padding-top":"0px"},attrs:{cols:"12"}},[a("v-text-field",{staticClass:"pa-5 pb-0",attrs:{rules:t.emailRules,label:"E-mail",outlined:"",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{staticClass:"pa-5 pb-0",attrs:{rules:t.cardNumberRules,label:"Numer karty bibliotecznej",outlined:"",required:""},model:{value:t.card_number,callback:function(e){t.card_number=e},expression:"card_number"}})],1),a("v-col",{staticStyle:{display:"inline-flex","padding-top":"0px"},attrs:{cols:"12"}},[a("v-text-field",{staticClass:"pa-5",attrs:{value:t.password,label:"Hasło",type:"password",rules:[t.rules.password],outlined:"",required:""},on:{input:function(e){return t.password=e}}}),a("v-text-field",{staticClass:"pa-5",attrs:{value:t.password_confirmation,label:"Powtórz hasło",type:"password",rules:t.confirmPasswordRules.concat(t.passwordConfirmationRule),outlined:"",required:""},model:{value:t.password_confirmation,callback:function(e){t.password_confirmation=e},expression:"password_confirmation"}})],1),a("v-row",{staticClass:"pb-5 justify-center"},[a("v-btn",{staticClass:"white--text font-weight-bold mr-5 mb-6",attrs:{disabled:!t.valid,color:"#008D18"},on:{click:t.validate}},[t._v(" Zarejestruj czytelnika ")]),a("v-btn",{staticClass:"white--text font-weight-bold mr-5 mb-6",attrs:{color:"#808080"},on:{click:t.reset}},[t._v(" Wyczyść dane ")])],1)],1)],1)],1)],1)],1)],1)},tt=[],et={name:"RegisterReader",data(){return{valid:!1,value:!0,name:"",surname:"",email:"",card_number:"",id_number:"",password:"",password_confirmation:"",rules:{required:t=>!!t||"Hasło jest wymagane",password:t=>{const e=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})/;return e.test(t)||"8 znaków, co najmniej jedna wielka litera, cyfra oraz znak specjalny"}},confirmPasswordRules:[t=>!!t||"Potwierdzenie hasła jest wymagane"],emailRules:[t=>!!t||"E-mail jest wymagany",t=>/.+@.+\..+/.test(t)||"E-mail musi być prawidłowy"],nameRules:[t=>!!t||"Imię jest wymagane!",t=>/^[a-zA-ZąęćżźńłóśĄĆĘŁŃÓŚŹŻ\s]+$/.test(t)||"Imię powinno zawierać tylko litery"],surnameRules:[t=>!!t||"Nazwisko jest wymagane!",t=>/^[a-zA-ZąęćżźńłóśĄĆĘŁŃÓŚŹŻ\s]+$/.test(t)||"Nazwisko powinno zawierać tylko litery"],cardNumberRules:[t=>!!t||"Numer karty bibliotecznej jest wymagany!",t=>/^\d+$/.test(t)||"Numer karty bibliotecznej musi być prawidłowy",t=>10===t.length||"Numer karty bibliotecznej powinien zawierać 10 cyfr"]}},methods:{validate(){if(this.$refs.form.validate()){const t={name:this.name,surname:this.surname,email:this.email,card_number:this.card_number,id_number:this.id_number,password:this.password,password_confirmation:this.password_confirmation};this.$store.dispatch("userRegister",t).then(()=>{const t=this.$swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,didOpen:t=>{t.addEventListener("mouseenter",this.$swal.stopTimer),t.addEventListener("mouseleave",this.$swal.resumeTimer)}});t.fire({icon:"success",title:"Dodano nowego czytelnika!"})}).catch(t=>{this.$swal("Błędne dane","Użytkownik o podanym loginie/e-mailu już istnieje!","error"),console.log(t)})}},reset(){this.$refs.form.reset()}},computed:{passwordConfirmationRule(){return()=>this.password===this.password_confirmation||"Hasło musi być takie same"}}},at=et,st=Object(y["a"])(at,Q,tt,!1,null,"5000dcf5",null),it=st.exports,ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"register"},[a("v-container",[a("v-row",{staticClass:"justify-center justify-md-center align-center"},[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-card",{staticClass:"ma-2"},[a("v-form",{ref:"form",attrs:{md:"6"},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-col",[a("h1",{staticClass:"pt-8",staticStyle:{"text-align":"center"}},[t._v("Biblioteka")]),a("h2",{staticClass:"pt-2",staticStyle:{"text-align":"center"}},[t._v("Tworzenie konta pracownika")])]),a("hr"),a("v-col",{staticStyle:{display:"inline-flex","padding-bottom":"0px"},attrs:{cols:"12"}},[a("v-text-field",{staticClass:"pa-5 pb-0",attrs:{rules:t.nameRules,label:"Imię",outlined:"",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("v-text-field",{staticClass:"pa-5 pb-0",attrs:{rules:t.surnameRules,label:"Nazwisko",outlined:"",required:""},model:{value:t.surname,callback:function(e){t.surname=e},expression:"surname"}})],1),a("v-col",{staticStyle:{display:"inline-flex","padding-bottom":"0px"},attrs:{cols:"12"}},[a("v-text-field",{staticClass:"pa-5 pb-0",attrs:{rules:t.emailRules,label:"E-mail",outlined:"",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{staticClass:"pa-5 pb-0",attrs:{rules:t.idNumberRules,label:"Numer identyfikacyjny pracownika",outlined:""},model:{value:t.id_number,callback:function(e){t.id_number=e},expression:"id_number"}})],1),a("v-col",{staticStyle:{display:"inline-flex","padding-bottom":"0px"},attrs:{cols:"12"}},[a("v-text-field",{staticClass:"pa-5",attrs:{value:t.password,label:"Hasło",type:"password",rules:[t.rules.password],outlined:"",required:""},on:{input:function(e){return t.password=e}}}),a("v-text-field",{staticClass:"pa-5",attrs:{value:t.password_confirmation,label:"Powtórz hasło",type:"password",rules:t.confirmPasswordRules.concat(t.passwordConfirmationRule),outlined:"",required:""},model:{value:t.password_confirmation,callback:function(e){t.password_confirmation=e},expression:"password_confirmation"}})],1),a("v-row",{staticClass:"pb-5 justify-center"},[a("v-btn",{staticClass:"white--text font-weight-bold mr-5 mb-6",attrs:{disabled:!t.valid,color:"#008D18"},on:{click:t.validate}},[t._v(" Zarejestruj pracownika ")]),a("v-btn",{staticClass:"white--text font-weight-bold mr-5 mb-6",attrs:{color:"#808080"},on:{click:t.reset}},[t._v(" Wyczyść dane ")])],1)],1)],1)],1)],1)],1)],1)},rt=[],nt={name:"RegisterWorker",data(){return{valid:!1,value:!0,name:"",surname:"",email:"",id_number:"",password:"",password_confirmation:"",rules:{required:t=>!!t||"Hasło jest wymagane",password:t=>{const e=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})/;return e.test(t)||"8 znaków, co najmniej jedna wielka litera, cyfra oraz znak specjalny"}},confirmPasswordRules:[t=>!!t||"Potwierdzenie hasła jest wymagane"],emailRules:[t=>!!t||"E-mail jest wymagany",t=>/.+@.+\..+/.test(t)||"E-mail musi być prawidłowy"],nameRules:[t=>!!t||"Imię jest wymagane!",t=>/^[a-zA-ZąęćżźńłóśĄĆĘŁŃÓŚŹŻ\s]+$/.test(t)||"Imię powinno zawierać tylko litery"],surnameRules:[t=>!!t||"Nazwisko jest wymagane!",t=>/^[a-zA-ZąęćżźńłóśĄĆĘŁŃÓŚŹŻ\s]+$/.test(t)||"Nazwisko powinno zawierać tylko litery"],idNumberRules:[t=>!!t||"Identyfikator jest wymagany!",t=>/^\d+$/.test(t)||"Identyfikator musi być prawidłowy",t=>12===t.length||"Identyfikator powinien zawierać 12 cyfr"]}},methods:{validate(){if(this.$refs.form.validate()){const t={name:this.name,surname:this.surname,email:this.email,id_number:this.id_number,password:this.password,password_confirmation:this.password_confirmation};this.$store.dispatch("userRegister",t).then(()=>{const t=this.$swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,didOpen:t=>{t.addEventListener("mouseenter",this.$swal.stopTimer),t.addEventListener("mouseleave",this.$swal.resumeTimer)}});t.fire({icon:"success",title:"Dodano nowego pracownika!"})}).catch(t=>{this.$swal("Błędne dane","Użytkownik o podanym loginie/e-mailu już istnieje!","error"),console.log(t)})}},reset(){this.$refs.form.reset()}},computed:{passwordConfirmationRule(){return()=>this.password===this.password_confirmation||"Hasło musi być takie same"}}},lt=nt,dt=Object(y["a"])(lt,ot,rt,!1,null,"3564d49e",null),ct=dt.exports,ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add"},[a("v-container",[a("v-row",{staticClass:"justify-center justify-md-center align-center"},[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-card",{staticClass:"ma-2"},[a("v-form",{ref:"form",attrs:{md:"6"},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-col",[a("h1",{staticClass:"pt-8",staticStyle:{"text-align":"center"}},[t._v("Biblioteka")]),a("h2",{staticClass:"pt-2",staticStyle:{"text-align":"center"}},[t._v("Dodawanie nowej książki")])]),a("hr"),a("div",{staticClass:"upload",staticStyle:{"justify-content":"center"}},[a("v-file-input",{staticClass:"col-8 pt-5",staticStyle:{display:"inline-block"},attrs:{accept:"image/png, image/jpeg, image/bmp",label:"Wybierz zdjęcie okładki",rules:t.coverRules,outlined:"",dense:"","prepend-icon":"","prepend-inner-icon":"mdi-book","hide-details":""},model:{value:t.cover,callback:function(e){t.cover=e},expression:"cover"}})],1),a("v-col",{staticStyle:{display:"inline-flex","padding-bottom":"0px"},attrs:{cols:"12"}},[a("v-text-field",{staticClass:"pa-5 pb-0",attrs:{label:"Tytuł",outlined:"",required:"",rules:t.titleRules},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),a("v-text-field",{staticClass:"pa-5 pb-0",attrs:{label:"Rok wydania",outlined:"",required:"",rules:t.publishYearRules},model:{value:t.publish_year,callback:function(e){t.publish_year=e},expression:"publish_year"}})],1),a("v-col",{staticStyle:{display:"inline-flex","padding-bottom":"0px"},attrs:{cols:"12"}},[a("v-textarea",{staticClass:"pa-5 pb-0",attrs:{label:"ISBN (ENTER jako separator)",outlined:"",required:"",rules:t.isbnRules},model:{value:t.isbn,callback:function(e){t.isbn=e},expression:"isbn"}})],1),a("v-col",{staticStyle:{display:"inline-flex","padding-bottom":"0px"},attrs:{cols:"12"}},[a("v-textarea",{staticClass:"pa-5 pb-0",attrs:{label:"Opis",outlined:"",required:"",rules:t.descriptionRules},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),a("v-col",{staticStyle:{display:"inline-flex","padding-bottom":"0px"},attrs:{cols:"12"}},[a("v-autocomplete",{staticClass:"pa-5 pt-0",attrs:{items:t.authors,"item-text":"name","item-value":"id","menu-props":"auto",label:"Autor",outlined:"",required:"",rules:t.authorRules,multiple:""},scopedSlots:t._u([{key:"item",fn:function(e){return[t._v(" "+t._s(e.item.name)+" "+t._s(e.item.surname)+" ")]}},{key:"selection",fn:function(e){return[t._v(" "+t._s(e.item.name)+" "+t._s(e.item.surname)+" ")]}}]),model:{value:t.selectedAuthor,callback:function(e){t.selectedAuthor=e},expression:"selectedAuthor"}}),a("v-autocomplete",{staticClass:"pa-5 pt-0",attrs:{items:t.categories,"item-text":"name","item-value":"id","menu-props":"auto",label:"Kategoria",outlined:"",required:"",rules:t.categoryRules},model:{value:t.selectedCategory,callback:function(e){t.selectedCategory=e},expression:"selectedCategory"}}),a("v-autocomplete",{staticClass:"pa-5 pt-0",attrs:{items:t.publishers,"item-text":"name","item-value":"id","menu-props":"auto",label:"Wydawnictwo",outlined:"",required:"",rules:t.publisherRules},model:{value:t.selectedPublisher,callback:function(e){t.selectedPublisher=e},expression:"selectedPublisher"}})],1),a("v-row",{staticClass:"pb-5 justify-center"},[a("v-btn",{staticClass:"white--text font-weight-bold mr-5 mb-6",attrs:{disabled:null!=this.cover&&!t.valid,color:"#008D18"},on:{click:t.validate}},[t._v(" Dodaj książkę ")]),a("v-btn",{staticClass:"white--text font-weight-bold mr-5 mb-6",attrs:{color:"#808080"},on:{click:t.reset}},[t._v(" Wyczyść dane ")])],1)],1)],1)],1)],1)],1)],1)},mt=[],pt={name:"AddBook",data(){return{valid:!1,value:!0,title:"",isbn:"",description:"",publish_year:"",cover:[],selectedAuthor:[],selectedCategory:"",selectedPublisher:"",titleRules:[t=>!!t||"Pole jest wymagane!",t=>t.length<=60||"Tytuł jest za długi!"],isbnRules:[t=>!!t||"Pole jest wymagane!"],descriptionRules:[t=>!!t||"Pole jest wymagane!",t=>t.length>=25||"Opis jest za krótki!"],publishYearRules:[t=>!!t||"Pole jest wymagane!",t=>/^\d+$/.test(t)||"Rok wydania musi być prawidłowy",t=>4===t.length||"Rok wydania powinien zawierać 4 cyfry",t=>t<=(new Date).getFullYear()||"Rok wydania musi być prawidłowy"],coverRules:[t=>!!t||"Zdjęcie okładki książki jest wymagane!",t=>t.size<2e6||"Zdjęcie okładki powinno być mniejsze niż 2MB!"],authorRules:[t=>!!t||"Wymagane jest wybranie autora!"],categoryRules:[t=>!!t||"Wymagane jest wybranie kategorii!"],publisherRules:[t=>!!t||"Wymagane jest wybranie wydawnictwa!"]}},methods:{validate(){if(this.$refs.form.validate()){const t=new FormData,e=this.cover;t.append("cover",e),t.append("title",this.title),t.append("isbn",this.isbn),t.append("description",this.description),t.append("publish_year",this.publish_year),t.append("author",this.selectedAuthor),t.append("category",this.selectedCategory),t.append("publisher",this.selectedPublisher),o.a.post("/api/book/store",t).then(t=>{1==t.data.success?(this.$swal("Dodano","Pomyślnie dodano książkę do bazy bibliotecznej!","success"),this.$router.push("/admin-panel/books")):this.$swal("Błąd","Coś poszło nie tak.","error")}).catch(t=>{this.$swal("Błędne informacje","Nie można dodać książki. Spróbuj ponownie.","error"),console.log(t)})}},reset(){this.$refs.form.reset()}},computed:{passwordConfirmationRule(){return()=>this.password===this.password_confirmation||"Hasło musi być takie same"},categories(){return this.$store.getters.getCategories},authors(){return this.$store.getters.getAuthors},publishers(){return this.$store.getters.getPublishers},buttonText(){return this.selectedFile?this.selectedFile.name:this.defaultButtonText}},watch:{dialog(t){t||this.close()}},created(){this.$store.dispatch("fetchCategories",{}),this.$store.dispatch("fetchAuthors",{}),this.$store.dispatch("fetchPublishers",{})}},ht=pt,vt=(a("9b9e"),Object(y["a"])(ht,ut,mt,!1,null,"4d59ec4e",null)),ft=vt.exports,gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add"},[a("v-container",[a("v-row",{staticClass:"justify-center justify-md-center align-center"},[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-card",{staticClass:"ma-2",attrs:{"max-width":"600"}},[a("v-form",{ref:"form",attrs:{md:"6"},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("h1",{staticClass:"pt-8",staticStyle:{"text-align":"center"}},[t._v("Biblioteka")]),a("h2",{staticClass:"pt-2",staticStyle:{"text-align":"center"}},[t._v("Wypożyczanie książek")]),a("hr"),a("v-autocomplete",{staticClass:"pa-5 pb-0",attrs:{items:t.readers,"item-text":"name","item-value":"id","menu-props":"auto",label:"Czytelnik",outlined:"",required:"",rules:t.readerRules},scopedSlots:t._u([{key:"item",fn:function(e){return[t._v(" "+t._s(e.item.name)+" "+t._s(e.item.surname)+" ")]}},{key:"selection",fn:function(e){return[t._v(" "+t._s(e.item.name)+" "+t._s(e.item.surname)+" ")]}}]),model:{value:t.selectedReader,callback:function(e){t.selectedReader=e},expression:"selectedReader"}}),a("v-autocomplete",{staticClass:"pa-5 pb-0 pt-0",attrs:{items:t.books,"item-text":"title","item-value":"id","menu-props":"auto",label:"Książki",outlined:"",required:"",rules:t.booksRules,multiple:""},scopedSlots:t._u([{key:"item",fn:function(e){return[t._v(" Tytuł: "+t._s(e.item.title)+", ISBN: "+t._s(e.item.isbn)+" ")]}},{key:"selection",fn:function(e){return[t._v(" "+t._s(e.item.title)+" ")]}}]),model:{value:t.selectedBooks,callback:function(e){t.selectedBooks=e},expression:"selectedBooks"}}),a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"Wybierz datę wypożyczenia","prepend-icon":"mdi-calendar",readonly:"",rules:t.dateRules},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},"v-text-field",i,!1),s))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-date-picker",{on:{input:function(e){t.menu=!1}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),a("v-row",{staticClass:"pb-5 justify-center"},[a("v-btn",{staticClass:"white--text font-weight-bold mr-5 mb-6",attrs:{disabled:!t.valid,color:"#008D18"},on:{click:t.validate}},[t._v(" Wypożycz książkę ")]),a("v-btn",{staticClass:"white--text font-weight-bold mr-5 mb-6",attrs:{color:"#808080"},on:{click:t.reset}},[t._v(" Wyczyść dane ")])],1)],1)],1)],1)],1)],1)],1)},bt=[],yt={name:"AddBorrow",data(){return{valid:!1,value:!0,selectedReader:"",isbn:"",selectedBooks:[],date:"",menu:!1,readerRules:[t=>!!t||"Wybranie czytelnika jest wymagane!"],booksRules:[t=>!!t||"Wymagane jest wybranie co najmniej jednej książki!",t=>t.length<=5||"Maksymalnie można wybrać 5 książek"],dateRules:[t=>!!t||"Wymagane jest wybranie daty!"],isbnRules:[t=>!!t||"Pole jest wymagane!"]}},methods:{validate(){this.$refs.form.validate()&&this.$store.dispatch("borrowBooks",{reader_id:this.selectedReader,book_id:this.selectedBooks,borrows_date:this.date,isbn:this.isbn}).then(t=>{const e=this.$swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,didOpen:t=>{t.addEventListener("mouseenter",this.$swal.stopTimer),t.addEventListener("mouseleave",this.$swal.resumeTimer)}});e.fire({icon:"success",title:"Wypożyczono książkę!"})}).catch(t=>{this.$swal("Błędny ISBN","Podano zły numer ISBN. Spróbuj ponownie.","error"),console.log(t)})},reset(){this.$refs.form.reset()}},computed:{readers(){return this.$store.getters.getReaders},books(){return this.$store.getters.getBooks}},watch:{dialog(t){t||this.close()}},created(){this.$store.dispatch("fetchReaders",{}),this.$store.dispatch("fetchAvailableBooks",{})}},wt=yt,kt=Object(y["a"])(wt,gt,bt,!1,null,"54b8c09e",null),xt=kt.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{staticStyle:{height:"100%",margin:"0"},attrs:{"fill-height":""}},[a("v-col",{staticStyle:{padding:"0","margin-top":"-15px","margin-bottom":"-15px"},attrs:{md:"auto"}},[a("v-card",{staticStyle:{height:"100%","border-radius":"0px","max-width":"280px"}},[a("v-navigation-drawer",{staticStyle:{"padding-top":"20px"},attrs:{permanent:"",width:"280px",dark:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("v-list-item",{attrs:{"two-line":""}},[a("v-list-item-avatar",[a("v-icon",[t._v("mdi-library")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Biblioteka")]),a("v-list-item-subtitle",[t._v("Panel zarządzania")])],1)],1)]},proxy:!0}])},[a("v-divider"),a("v-list",{attrs:{dense:""}},t._l(t.items,(function(e){return a("v-list-group",{key:e.title,attrs:{"prepend-icon":e.action,"no-action":""},scopedSlots:t._u([{key:"activator",fn:function(){return[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.title)}})],1)]},proxy:!0}],null,!0),model:{value:e.active,callback:function(a){t.$set(e,"active",a)},expression:"item.active"}},t._l(e.items,(function(e){return a("v-list-item",{key:e.title,attrs:{to:e.route}},[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.title)}})],1)],1)})),1)})),1)],1)],1)],1),a("v-col",{staticStyle:{padding:"0px"}},[a("router-view")],1)],1)},jt=[],zt={name:"AdminPanel",data(){return{items:[{action:"mdi-account-group-outline",title:"Użytkownicy",items:[{title:"Czytelnicy",route:"/admin-panel/readers"},{title:"Pracownicy",route:"/admin-panel/workers"},{title:"Role użytkowników",route:"/admin-panel/roles"}]},{action:"mdi-book-open-page-variant",title:"Książki",items:[{title:"Ogólne zestawienie",route:"/admin-panel/books"},{title:"Zestawienie z ISBN",route:"/admin-panel/books-isbn"},{title:"Autorzy",route:"/admin-panel/authors"},{title:"Kategorie",route:"/admin-panel/categories"},{title:"Wydawnictwa",route:"/admin-panel/publishers"}]},{action:"mdi-clipboard-arrow-down-outline",title:"Wypożyczenia i oddania",items:[{title:"Przeglądaj",route:"/admin-panel/borrows-returns"},{title:"Wypożyczone",route:"/admin-panel/borrows"},{title:"Opóźnienia i kary",route:"/admin-panel/delays-penalties"}]},{action:"mdi-calendar",title:"Kalendarz",items:[{title:"Wydarzenia",route:"/admin-panel/calendar/events"},{title:"Typy wydarzeń",route:"/admin-panel/calendar/types"}]},{action:"mdi-gesture-tap-button",title:"Akcje",items:[{title:"Sugestie czytelników",route:"/admin-panel/suggestions"}]}]}}},Ct=zt,It=(a("3a12"),Object(y["a"])(Ct,_t,jt,!1,null,"306d7d0e",null)),$t=It.exports,St=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,search:t.search,items:t.readers,"sort-by":"card_number"},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Czytelnicy")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"mr-3",attrs:{"append-icon":"mdi-magnify",label:"Szukaj","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),[a("v-btn",{staticClass:"mb-2",attrs:{color:"#008D18",dark:"",to:"/register-reader"}},[t._v("Dodaj czytelnika")])],a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.editReaderDialog,callback:function(e){t.editReaderDialog=e},expression:"editReaderDialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{rules:t.cardNumberRules,label:"Numer karty"},model:{value:t.editedItem.card_number,callback:function(e){t.$set(t.editedItem,"card_number",e)},expression:"editedItem.card_number"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{rules:t.nameRules,label:"Imię"},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{rules:t.surnameRules,label:"Nazwisko"},model:{value:t.editedItem.surname,callback:function(e){t.$set(t.editedItem,"surname",e)},expression:"editedItem.surname"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{rules:t.emailRules,label:"E-mail"},model:{value:t.editedItem.email,callback:function(e){t.$set(t.editedItem,"email",e)},expression:"editedItem.email"}})],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"#008D18",text:""},on:{click:t.close}},[t._v("Anuluj")]),a("v-btn",{attrs:{color:"#008D18",text:"",disabled:!t.valid},on:{click:t.addReader}},[t._v("Zapisz")])],1)],1)],1)],2)]},proxy:!0},{key:"item.actions",fn:function(e){var s=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editReader(s)}}},[t._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteReader(s)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("p",{staticClass:"pt-5"},[t._v("Brak czytelników")])]},proxy:!0}],null,!0)})},Rt=[],Bt={data:()=>({editReaderDialog:!1,valid:!1,search:"",readers:[],headers:[{text:"Numer karty bibliotecznej",align:"start",sortable:!1,value:"card_number"},{text:"Imię",value:"name"},{text:"Nazwisko",value:"surname"},{text:"E-mail",value:"email"},{text:"Akcje",value:"actions",sortable:!1}],editedIndex:-1,editedItem:{card_number:"",name:"",surname:"",email:""},defaultItem:{card_number:"",name:"",surname:"",email:""},nameRules:[t=>!!t||"Imię jest wymagane!",t=>/^[a-zA-ZąęćżźńłóśĄĆĘŁŃÓŚŹŻ\s]+$/.test(t)||"Imię powinno zawierać tylko litery"],emailRules:[t=>!!t||"E-mail jest wymagany",t=>/.+@.+\..+/.test(t)||"E-mail musi być prawidłowy"],surnameRules:[t=>!!t||"Nazwisko jest wymagane!",t=>/^[a-zA-ZąęćżźńłóśĄĆĘŁŃÓŚŹŻ\s]+$/.test(t)||"Nazwisko powinno zawierać tylko litery"],cardNumberRules:[t=>!!t||"Numer karty bibliotecznej jest wymagany!",t=>/^\d+$/.test(t)||"Numer karty bibliotecznej musi być prawidłowy",t=>10===t.length||"Numer karty bibliotecznej powinien zawierać 10 cyfr"]}),computed:{formTitle(){return this.editedIndex,"Edytuj dane czytelnika"}},watch:{dialog(t){t||this.close()}},methods:{setData(t){this.readers=t},editReader(t){this.editedIndex=this.readers.indexOf(t),this.editedItem={...t},this.editReaderDialog=!0},addReader(){this.$refs.form.validate()&&(this.editedIndex>-1&&(Object.assign(this.readers[this.editedIndex],this.editedItem),o.a.put("/api/reader/edit/"+this.editedItem.id,{card_number:this.editedItem.card_number,name:this.editedItem.name,surname:this.editedItem.surname,email:this.editedItem.email})),o.a.get("/api/user/getReaders").then(t=>{this.readers=t.data}),this.close())},deleteReader(t){const e=this.readers.indexOf(t);this.$swal({title:"Czy jesteś pewien, że chcesz usunąć tego czytelnika?",icon:"question",showCancelButton:!0,confirmButtonText:"Usuń",cancelButtonText:"Anuluj"}).then(a=>{a.value?(o.a.delete("/api/reader/delete/"+t.id,{}),this.readers.splice(e,1),this.$swal("Usunięto","Pomyślnie usunięto czytelnika","success")):this.$swal("Anulowano","Akcja została anulowana","info")})},close(){this.editReaderDialog=!1,this.$nextTick(()=>{this.editedItem={...this.defaultItem},this.editedIndex=-1})}},beforeRouteEnter(t,e,a){o.a.get("/api/user/getReaders").then(t=>{a(e=>e.setData(t.data))})}},Dt=Bt,At=Object(y["a"])(Dt,St,Rt,!1,null,null,null),Tt=At.exports,Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,search:t.search,items:t.workers,"sort-by":"id_number"},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Pracownicy")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"mr-3",attrs:{"append-icon":"mdi-magnify",label:"Szukaj","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),[a("v-btn",{staticClass:"mb-2",attrs:{color:"#008D18",dark:"",to:"/register-worker"}},[t._v("Dodaj pracownika")])],a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.editWorkerDialog,callback:function(e){t.editWorkerDialog=e},expression:"editWorkerDialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{rules:t.idNumberRules,label:"Numer identyfikacyjny"},model:{value:t.editedItem.id_number,callback:function(e){t.$set(t.editedItem,"id_number",e)},expression:"editedItem.id_number"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{rules:t.nameRules,label:"Imię"},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{rules:t.surnameRules,label:"Nazwisko"},model:{value:t.editedItem.surname,callback:function(e){t.$set(t.editedItem,"surname",e)},expression:"editedItem.surname"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{rules:t.emailRules,label:"E-mail"},model:{value:t.editedItem.email,callback:function(e){t.$set(t.editedItem,"email",e)},expression:"editedItem.email"}})],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"#008D18",text:""},on:{click:t.close}},[t._v("Anuluj")]),a("v-btn",{attrs:{color:"#008D18",text:"",disabled:!t.valid},on:{click:t.addWorker}},[t._v("Zapisz")])],1)],1)],1)],2)]},proxy:!0},{key:"item.actions",fn:function(e){var s=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editWorker(s)}}},[t._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteWorker(s)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("p",{staticClass:"pt-5"},[t._v("Brak pracowników")])]},proxy:!0}],null,!0)})},Pt=[],Ot={data:()=>({editWorkerDialog:!1,valid:!1,search:"",workers:[],headers:[{text:"Numer identyfikacyjny",align:"start",sortable:!1,value:"id_number"},{text:"Imię",value:"name"},{text:"Nazwisko",value:"surname"},{text:"E-mail",value:"email"},{text:"Akcje",value:"actions",sortable:!1}],editedIndex:-1,editedItem:{id_number:"",name:"",surname:"",email:""},defaultItem:{id_number:"",name:"",surname:"",email:""},emailRules:[t=>!!t||"E-mail jest wymagany",t=>/.+@.+\..+/.test(t)||"E-mail musi być prawidłowy"],nameRules:[t=>!!t||"Imię jest wymagane!",t=>/^[a-zA-ZąęćżźńłóśĄĆĘŁŃÓŚŹŻ\s]+$/.test(t)||"Imię powinno zawierać tylko litery"],surnameRules:[t=>!!t||"Nazwisko jest wymagane!",t=>/^[a-zA-ZąęćżźńłóśĄĆĘŁŃÓŚŹŻ\s]+$/.test(t)||"Nazwisko powinno zawierać tylko litery"],idNumberRules:[t=>!!t||"Identyfikator jest wymagany!",t=>/^\d+$/.test(t)||"Identyfikator musi być prawidłowy",t=>12===t.length||"Identyfikator powinien zawierać 12 cyfr"]}),computed:{formTitle(){return this.editedIndex,"Edytuj dane pracownika"}},watch:{dialog(t){t||this.close()}},methods:{setData(t){this.workers=t},editWorker(t){this.editedIndex=this.workers.indexOf(t),this.editedItem={...t},this.editWorkerDialog=!0},addWorker(){this.$refs.form.validate()&&(this.editedIndex>-1&&(Object.assign(this.workers[this.editedIndex],this.editedItem),o.a.put("/api/worker/edit/"+this.editedItem.id,{id_number:this.editedItem.id_number,name:this.editedItem.name,surname:this.editedItem.surname,email:this.editedItem.email})),o.a.get("/api/user/getWorkers").then(t=>{this.readers=t.data}),this.close())},deleteWorker(t){const e=this.workers.indexOf(t);this.$swal({title:"Czy jesteś pewien, że chcesz usunąć tego pracownika?",icon:"question",showCancelButton:!0,confirmButtonText:"Usuń",cancelButtonText:"Anuluj"}).then(a=>{a.value?(o.a.delete("/api/worker/delete/"+t.id,{}),this.workers.splice(e,1),this.$swal("Usunięto","Pomyślnie usunięto pracownika","success")):this.$swal("Anulowano","Akcja została anulowana","info")})},close(){this.editWorkerDialog=!1,this.$nextTick(()=>{this.editedItem={...this.defaultItem},this.editedIndex=-1})}},beforeRouteEnter(t,e,a){o.a.get("/api/user/getWorkers").then(t=>{a(e=>e.setData(t.data))})}},Nt=Ot,Wt=Object(y["a"])(Nt,Et,Pt,!1,null,null,null),Lt=Wt.exports,Ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.roles,search:t.search,"sort-by":"id"},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Role użytkowników")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"mr-3",attrs:{"append-icon":"mdi-magnify",label:"Szukaj","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-dialog",{attrs:{"max-width":"250px",persistent:""},model:{value:t.editRolesDialog,callback:function(e){t.editRolesDialog=e},expression:"editRolesDialog"}},[a("v-card",[a("v-card-title",{staticStyle:{"justify-content":"center"}},[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{rules:t.roleRules,label:"Admin"},model:{value:t.editedItem.is_admin,callback:function(e){t.$set(t.editedItem,"is_admin",e)},expression:"editedItem.is_admin"}})],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"#008D18",text:""},on:{click:t.close}},[t._v("Anuluj")]),a("v-btn",{attrs:{color:"#008D18",text:"",disabled:!t.valid},on:{click:t.addRole}},[t._v("Zapisz")])],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var s=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editRole(s)}}},[t._v(" mdi-pencil ")])]}},{key:"no-data",fn:function(){return[a("p",{staticClass:"pt-5"},[t._v("Brak użytkowników")])]},proxy:!0}],null,!0)})},Zt=[],qt={data:()=>({editRolesDialog:!1,valid:!1,roles:[],search:"",headers:[{text:"ID",align:"start",value:"id"},{text:"Imię",value:"name"},{text:"Nazwisko",value:"surname"},{text:"E-mail",value:"email"},{text:"Admin",value:"is_admin"},{text:"Akcje",value:"actions",sortable:!1}],editedIndex:-1,editedItem:{id:"",name:"",surname:"",email:"",is_admin:""},defaultItem:{id_number:"",name:"",surname:"",email:"",is_admin:""},roleRules:[t=>!!t||"Pole jest wymagane!",t=>/^\d+$/.test(t)||"Rola musi zostać poprawnie wprowadzona",t=>t>=0&&t<=1||"Pole typu boolean. Proszę podać 0 lub 1"]}),computed:{formTitle(){return-1===this.editedIndex?"Nowa rola":"Edytuj rolę"}},methods:{setData(t){this.roles=t},editRole(t){this.editedIndex=this.roles.indexOf(t),this.editedItem={...t},this.editRolesDialog=!0},addRole(){this.$refs.form.validate()&&(this.editedIndex>-1&&(Object.assign(this.roles[this.editedIndex],this.editedItem),o.a.put("/api/roles/edit/"+this.editedItem.id,{is_worker:this.editedItem.is_worker,is_admin:this.editedItem.is_admin})),this.$store.dispatch("fetchRoles",{}),this.close())},close(){this.editRolesDialog=!1,this.$nextTick(()=>{this.editedItem={...this.defaultItem},this.editedIndex=-1})}},beforeRouteEnter(t,e,a){o.a.get("/api/user/getRoles").then(t=>{a(e=>e.setData(t.data))})}},Ft=qt,Mt=Object(y["a"])(Ft,Ut,Zt,!1,null,null,null),Gt=Mt.exports,Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",staticStyle:{"word-break":"initial"},attrs:{headers:t.headers,search:t.search,items:t.books,expanded:t.expanded,"show-expand":"","single-expand":!0,"sort-by":"card_number"},on:{"update:expanded":function(e){t.expanded=e}},scopedSlots:t._u([{key:"item.fullName",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.authorName)+" "+t._s(a.surname)+" ")]}},{key:"expanded-item",fn:function(e){var s=e.headers,i=e.item;return[a("td",{attrs:{colspan:s.length}},[t._v(" Opis książki: "+t._s(i.description)+" ")])]}},{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Książki")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"mr-3",attrs:{"append-icon":"mdi-magnify",label:"Szukaj","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),[a("v-btn",{staticClass:"mb-2",attrs:{color:"#008D18",dark:"",to:"/add-book"}},[t._v("Dodaj książkę")])],a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.editBookDialog,callback:function(e){t.editBookDialog=e},expression:"editBookDialog"}},[a("v-card",[a("v-card-title",{staticStyle:{"justify-content":"center"}},[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"5"}},[a("v-text-field",{attrs:{rules:t.titleRules,label:"Tytuł książki"},model:{value:t.editedItem.title,callback:function(e){t.$set(t.editedItem,"title",e)},expression:"editedItem.title"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"5"}},[a("v-text-field",{attrs:{rules:t.publishYearRules,label:"Rok wydania"},model:{value:t.editedItem.publish_year,callback:function(e){t.$set(t.editedItem,"publish_year",e)},expression:"editedItem.publish_year"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{rules:t.descriptionRules,label:"Opis"},model:{value:t.editedItem.description,callback:function(e){t.$set(t.editedItem,"description",e)},expression:"editedItem.description"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("Anuluj")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.addBook}},[t._v("Zapisz")])],1)],1)],1),a("v-dialog",{staticClass:"rounded-xl",attrs:{"max-width":"550px"},model:{value:t.editImageDialog,callback:function(e){t.editImageDialog=e},expression:"editImageDialog"}},[a("v-card",[a("v-card-text",[a("v-container",[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"8"}},[a("v-card",[a("v-img",{staticStyle:{height:"400px",width:"320px"},attrs:{src:"https://library-site.s3.eu-north-1.amazonaws.com/covers/"+t.image,"aspect-ratio":"1"}})],1)],1)],1)],1)],1),a("v-divider"),a("v-card-actions",{staticStyle:{"justify-content":"center",display:"flex","text-align":"center","padding-bottom":"25px"}},[a("v-spacer"),a("v-btn",{attrs:{color:"#008D18",text:""},on:{click:t.closeImage}},[t._v("Anuluj")]),a("v-file-input",{attrs:{accept:"image/png, image/jpeg, image/bmp",label:"Wybierz zdjęcie",rules:t.coverRules,outlined:"",dense:"","prepend-icon":"","prepend-inner-icon":"mdi-book","hide-details":""},on:{change:t.onFileChanged},model:{value:t.cover,callback:function(e){t.cover=e},expression:"cover"}}),a("v-btn",{attrs:{color:"#228B22",disabled:!t.valid,text:""},on:{click:t.sendImage}},[t._v(" Wgraj ")])],1)],1)],1)],2)]},proxy:!0},{key:"item.cover",fn:function(e){var s=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.showImage(s)}}},[t._v(" mdi-image ")])]}},{key:"item.actions",fn:function(e){var s=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editBook(s)}}},[t._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteBook(s)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("p",{staticClass:"pt-5"},[t._v("Brak książek")])]},proxy:!0},{key:"item.amount",fn:function(e){var s=e.item;return[a("v-chip",{attrs:{color:t.getColor(s.amount),dark:""}},[t._v(t._s(s.amount))])]}}],null,!0)})},Ht=[],Yt={data:()=>({editBookDialog:!1,editImageDialog:!1,defaultButtonText:"Zmień zdjęcie okładki (*.jpg)",isSelecting:!1,valid:!1,search:"",cover:[],books:[],image:"",show:!1,expanded:[],headers:[{text:"Tytuł książki",align:"start",value:"title"},{text:"Autor",value:"fullName"},{text:"Kategoria",value:"categoryName"},{text:"Rok wydania",value:"publish_year"},{text:"Wydawnictwo",value:"publisherName"},{text:"Ilość",value:"amount"},{text:"Okładka",value:"cover"},{text:"Akcje",value:"actions",sortable:!1}],editedIndex:-1,editedItem:{title:"",description:"",publish_year:""},defaultItem:{title:"",description:"",publish_year:""},titleRules:[t=>!!t||"Pole jest wymagane!",t=>t.length<=60||"Tytuł jest za długi!"],descriptionRules:[t=>!!t||"Pole jest wymagane!",t=>t.length>=25||"Opis jest za krótki!"],publishYearRules:[t=>!!t||"Pole jest wymagane!",t=>/^\d+$/.test(t)||"Rok wydania musi być prawidłowy",t=>4===t.length||"Rok wydania powinien zawierać 4 cyfry"],coverRules:[t=>!!t||"Zdjęcie okładki książki jest wymagane!",t=>t.size<2e6||"Zdjęcie okładki powinno być mniejsze niż 2MB!"]}),computed:{formTitle(){return this.editedIndex,"Edytuj dane o książce"},buttonText(){return this.selectedFile?this.selectedFile.name:this.defaultButtonText}},watch:{dialog(t){t||this.close()}},methods:{setData(t){this.books=t},editBook(t){this.editedIndex=this.books.indexOf(t),this.editedItem={...t},this.editBookDialog=!0},addBook(){this.editedIndex>-1&&(Object.assign(this.books[this.editedIndex],this.editedItem),o.a.put("/api/book/edit/"+this.editedItem.id,{title:this.editedItem.title,description:this.editedItem.description,publish_year:this.editedItem.publish_year})),this.$store.dispatch("fetchBooks",{}),this.close()},deleteBook(t){const e=this.books.indexOf(t);this.$swal({title:"Czy jesteś pewien, że chcesz usunąć te książki?",icon:"question",showCancelButton:!0,confirmButtonText:"Usuń",cancelButtonText:"Anuluj"}).then(a=>{a.value?(o.a.delete("/api/book/delete/group/"+t.id,{}),this.books.splice(e,1),this.$swal("Usunięto","Pomyślnie usunięto książki","success")):this.$swal("Anulowano","Akcja została anulowana","info")})},close(){this.editBookDialog=!1,this.$nextTick(()=>{this.editedItem={...this.defaultItem},this.editedIndex=-1})},closeImage(){this.editImageDialog=!1,this.$nextTick(()=>{this.editedItem={...this.defaultItem},this.editedIndex=-1})},showImage(t){this.image=t.cover,this.editedIndex=this.books.indexOf(t),this.editedItem={...t},this.editImageDialog=!0},onFileChanged(){this.valid=!0},sendImage(){const t=this.cover,e=new FormData;e.append("cover",t),o.a.post("/api/book/changeImage/"+this.editedItem.id,e).then(t=>{!0===t.data.success?(this.$swal("Dodano","Pomyślnie zmieniono okładkę książki!","success"),this.editImageDialog=!1):this.$swal("Błąd","Okładka książki nie mogła zostać zmieniona!","error")}),o.a.get("/api/book/getBooks").then(t=>{this.books=t.data})},getColor(t){return"0"===t?"red":"1"===t||"2"===t?"orange":"green"}},beforeRouteEnter(t,e,a){o.a.get("/api/book/getBooks").then(t=>{a(e=>e.setData(t.data))})}},Vt=Yt,Jt=Object(y["a"])(Vt,Kt,Ht,!1,null,null,null),Xt=Jt.exports,Qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",staticStyle:{"word-break":"initial"},attrs:{headers:t.headers,search:t.search,items:t.books,"sort-by":"card_number"},scopedSlots:t._u([{key:"item.fullName",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.authorName)+" "+t._s(a.surname)+" ")]}},{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Książki")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"mr-3",attrs:{"append-icon":"mdi-magnify",label:"Szukaj","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),[a("v-btn",{staticClass:"mb-2",attrs:{color:"#008D18",dark:"",to:"/add-book"}},[t._v("Dodaj książkę")])],a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.editBookDialog,callback:function(e){t.editBookDialog=e},expression:"editBookDialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{rules:t.isbnRules,label:"ISBN"},model:{value:t.editedItem.isbn,callback:function(e){t.$set(t.editedItem,"isbn",e)},expression:"editedItem.isbn"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("Anuluj")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.addBook}},[t._v("Zapisz")])],1)],1)],1)],2)]},proxy:!0},{key:"item.actions",fn:function(e){var s=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editBook(s)}}},[t._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteBook(s)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("p",{staticClass:"pt-5"},[t._v("Brak książek")])]},proxy:!0}],null,!0)})},te=[],ee={data:()=>({editBookDialog:!1,valid:!1,search:"",books:[],headers:[{text:"Tytuł książki",align:"start",value:"title"},{text:"Autor",value:"fullName"},{text:"ISBN",value:"isbn"},{text:"Akcje",value:"actions",sortable:!1}],editedIndex:-1,editedItem:{isbn:""},defaultItem:{isbn:""},isbnRules:[t=>!!t||"Pole jest wymagane!",t=>/^\d+$/.test(t)||"Numer ISBN musi być prawidłowy",t=>13===t.length||"Numer ISBN powinien zawierać 13 cyfr"]}),computed:{formTitle(){return this.editedIndex,"Edytuj dane o książce"}},watch:{dialog(t){t||this.close()}},methods:{setData(t){this.books=t},editBook(t){this.editedIndex=this.books.indexOf(t),this.editedItem={...t},this.editBookDialog=!0},addBook(){this.editedIndex>-1&&(Object.assign(this.books[this.editedIndex],this.editedItem),o.a.put("/api/book/edit/isbn/"+this.editedItem.id,{isbn:this.editedItem.isbn})),this.$store.dispatch("fetchBooksISBN",{}),this.close()},deleteBook(t){const e=this.books.indexOf(t);this.$swal({title:"Czy jesteś pewien, że chcesz usunąć tę książkę?",icon:"question",showCancelButton:!0,confirmButtonText:"Usuń",cancelButtonText:"Anuluj"}).then(a=>{a.value?(o.a.delete("/api/book/delete/"+t.id,{}),this.books.splice(e,1),this.$store.dispatch("fetchBooksISBN",{}),this.$swal("Usunięto","Pomyślnie usunięto książkę","success")):this.$swal("Anulowano","Akcja została anulowana","info")})},close(){this.editBookDialog=!1,this.$nextTick(()=>{this.editedItem={...this.defaultItem},this.editedIndex=-1})}},beforeRouteEnter(t,e,a){o.a.get("/api/book/getBooks/isbn").then(t=>{a(e=>e.setData(t.data))})}},ae=ee,se=Object(y["a"])(ae,Qt,te,!1,null,null,null),ie=se.exports,oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.authors,search:t.search,expanded:t.expanded,"show-expand":"","single-expand":!0,"sort-by":"amount"},on:{"update:expanded":function(e){t.expanded=e}},scopedSlots:t._u([{key:"expanded-item",fn:function(e){var s=e.headers,i=e.item;return[a("td",{attrs:{colspan:s.length}},[t._v(" Życiorys autora: "+t._s(i.description)+" ")])]}},{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Autorzy")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"mr-3",attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px",persistent:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"#008D18",dark:""}},s),[t._v("Nowy autor")])]}}]),model:{value:t.addAuthorDialog,callback:function(e){t.addAuthorDialog=e},expression:"addAuthorDialog"}},[a("v-card",[a("v-card-title",{staticStyle:{"justify-content":"center"}},[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-form",{ref:"form"},[a("v-row",[a("v-col",[a("v-text-field",{attrs:{rules:t.nameRules,label:"Imię"},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),a("v-col",[a("v-text-field",{attrs:{rules:t.surnameRules,label:"Nazwisko"},model:{value:t.editedItem.surname,callback:function(e){t.$set(t.editedItem,"surname",e)},expression:"editedItem.surname"}})],1)],1),a("v-row",[a("v-col",[a("v-textarea",{attrs:{rules:t.descriptionRules,label:"Życiorys"},model:{value:t.editedItem.description,callback:function(e){t.$set(t.editedItem,"description",e)},expression:"editedItem.description"}})],1)],1),a("v-row",{staticStyle:{"justify-content":"center","text-align":"center"}},[a("v-file-input",{attrs:{accept:"image/png, image/jpeg, image/bmp",label:"Wybierz zdjęcie autora",rules:t.photoRules,outlined:"",dense:"","prepend-icon":"","prepend-inner-icon":"mdi-book","hide-details":""},on:{change:t.onFileChanged},model:{value:t.photo,callback:function(e){t.photo=e},expression:"photo"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"#008D18",text:""},on:{click:t.close}},[t._v("Anuluj")]),a("v-btn",{attrs:{color:"#008D18",text:"",disabled:!t.valid},on:{click:t.addAuthor}},[t._v("Zapisz")])],1)],1)],1),a("v-dialog",{staticClass:"rounded-xl",attrs:{"max-width":"550px",persistent:""},model:{value:t.editPhotoDialog,callback:function(e){t.editPhotoDialog=e},expression:"editPhotoDialog"}},[a("v-card",[a("v-card-text",[a("v-container",[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"6"}},[a("v-card",[a("v-img",{attrs:{src:"https://library-site.s3.eu-north-1.amazonaws.com/authors/"+t.image}})],1)],1)],1)],1)],1),a("v-divider"),a("v-card-actions",{staticStyle:{"justify-content":"center",display:"flex","text-align":"center","padding-bottom":"25px"}},[a("v-spacer"),a("v-btn",{attrs:{color:"#228B22",text:""},on:{click:t.closePhoto}},[t._v("Anuluj")]),a("v-file-input",{attrs:{accept:"image/png, image/jpeg, image/bmp",label:"Wybierz zdjęcie",rules:t.photoRules,outlined:"",dense:"","prepend-icon":"","prepend-inner-icon":"mdi-account","hide-details":""},on:{change:t.onFileChanged},model:{value:t.photo,callback:function(e){t.photo=e},expression:"photo"}}),a("v-btn",{attrs:{color:"#228B22",disabled:!t.valid,text:""},on:{click:t.sendPhoto}},[t._v(" Wgraj ")])],1)],1)],1)],1)]},proxy:!0},{key:"item.photo",fn:function(e){var s=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.showPhoto(s)}}},[t._v(" mdi-image ")])]}},{key:"item.action",fn:function(e){var s=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editAuthor(s)}}},[t._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteAuthor(s)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("p",{staticClass:"pt-5"},[t._v("Brak autorów")])]},proxy:!0}],null,!0)})},re=[],ne={name:"Authors",data:()=>({addAuthorDialog:!1,editPhotoDialog:!1,isSelecting:!1,valid:!1,search:"",image:"",photo:[],authors:[],expanded:[],headers:[{text:"Imię",align:"start",value:"name"},{text:"Nazwisko",value:"surname"},{text:"Zdjęcie",value:"photo"},{text:"Akcje",value:"action",sortable:!1}],editedIndex:-1,editedItem:{name:"",surname:"",description:""},defaultItem:{name:"",surname:"",description:""},nameRules:[t=>!!t||"Imię jest wymagane!",t=>/^[a-zA-ZąęćżźńłóśĄĆĘŁŃÓŚŹŻ\s]+$/.test(t)||"Imię powinno zawierać tylko litery"],surnameRules:[t=>!!t||"Nazwisko jest wymagane!",t=>/^[a-zA-ZąęćżźńłóśĄĆĘŁŃÓŚŹŻ\s]+$/.test(t)||"Nazwisko powinno zawierać tylko litery"],descriptionRules:[t=>!!t||"Życiorys jest wymagany!",t=>t.length>=25||"Życiorys jest za krótki!"],photoRules:[t=>!!t||"Zdjęcie autora jest wymagane!",t=>t.size<2e6||"Zdjęcie autora powinno być mniejsze niż 2MB!"]}),computed:{formTitle(){return-1===this.editedIndex?"Nowy autor":"Edytuj dane autora"},buttonText(){return this.selectedFile?this.selectedFile.name:this.defaultButtonText}},watch:{dialog(t){t||this.close()}},methods:{setData(t){this.authors=t},editAuthor(t){this.editedIndex=this.authors.indexOf(t),this.editedItem={...t},this.addAuthorDialog=!0},deleteAuthor(t){const e=this.authors.indexOf(t);this.$swal({title:"Czy jesteś pewien, że chcesz usunąć tego autora?",icon:"question",showCancelButton:!0,confirmButtonText:"Usuń",cancelButtonText:"Anuluj"}).then(a=>{a.value?(o.a.delete("/api/author/delete/"+t.id,{}),this.authors.splice(e,1),this.$swal("Usunięto","Pomyślnie usunięto autora","success")):this.$swal("Anulowano","Akcja została anulowana","info")})},addAuthor(){if(this.$refs.form.validate()){if(this.editedIndex>-1)Object.assign(this.authors[this.editedIndex],this.editedItem),o.a.put("/api/author/edit/"+this.editedItem.id,{name:this.editedItem.name,surname:this.editedItem.surname,description:this.editedItem.description});else{const t=this.photo,e=new FormData;e.append("photo",t),e.append("name",this.editedItem.name),e.append("surname",this.editedItem.surname),e.append("description",this.editedItem.description),o.a.post("/api/author/add",e).then(()=>{const t=this.$swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,didOpen:t=>{t.addEventListener("mouseenter",this.$swal.stopTimer),t.addEventListener("mouseleave",this.$swal.resumeTimer)}});t.fire({icon:"success",title:"Dodano autora!"})}).catch(t=>{console.log(t)})}o.a.get("/api/author/getAuthors").then(t=>{this.authors=t.data}),this.$refs.form.resetValidation(),this.close()}},close(){this.addAuthorDialog=!1,this.$refs.form.resetValidation(),this.$nextTick(()=>{this.editedItem={...this.defaultItem},this.editedIndex=-1})},onFileChanged(){this.valid=!0},closePhoto(){this.editPhotoDialog=!1,this.$nextTick(()=>{this.editedItem={...this.defaultItem},this.editedIndex=-1})},showPhoto(t){this.image=t.photo,this.editedIndex=this.authors.indexOf(t),this.editedItem={...t},this.editPhotoDialog=!0},sendPhoto(){const t=this.photo,e=new FormData;e.append("photo",t),o.a.post("/api/author/changePhoto/"+this.editedItem.id,e).then(t=>{!0===t.data.success?(this.$swal("Dodano","Pomyślnie zmieniono awatar autora!","success"),this.editPhotoDialog=!1):this.$swal("Błąd","Awatar autora nie mógł zostać zmieniony!","error")}),o.a.get("/api/author/getAuthors").then(t=>{this.authors=t.data})}},beforeRouteEnter(t,e,a){o.a.get("/api/author/getAuthors").then(t=>{a(e=>e.setData(t.data))})}},le=ne,de=Object(y["a"])(le,oe,re,!1,null,"38c8877b",null),ce=de.exports,ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.categories,search:t.search,"sort-by":"amount"},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Kategorie")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"mr-3",attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"300px",persistent:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"#008D18",dark:""}},s),[t._v("Nowa kategoria")])]}}]),model:{value:t.addCategoryDialog,callback:function(e){t.addCategoryDialog=e},expression:"addCategoryDialog"}},[a("v-card",[a("v-card-title",{staticStyle:{"justify-content":"center"}},[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-row",[a("v-col",[a("v-text-field",{attrs:{rules:t.categoryRules,label:"Kategoria"},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"#008D18",text:""},on:{click:t.close}},[t._v("Anuluj")]),a("v-btn",{attrs:{color:"#008D18",text:"",disabled:!t.valid},on:{click:t.addCategory}},[t._v("Zapisz")])],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(e){var s=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editCategory(s)}}},[t._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteCategory(s)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("p",{staticClass:"pt-5"},[t._v("Brak kategorii")])]},proxy:!0}],null,!0)})},me=[],pe={name:"Categories",data:()=>({addCategoryDialog:!1,valid:!1,search:"",categoryName:"",headers:[{text:"Kategorie",align:"start",value:"name"},{text:"Akcje",value:"action",sortable:!1}],editedIndex:-1,editedItem:{name:""},defaultItem:{name:""},categoryRules:[t=>!!t||"Nazwa jest wymagana!",t=>/^[a-zA-ZąęćżźńłóśĄĆĘŁŃÓŚŹŻ\s]+$/.test(t)||"Nazwa kategorii powinna zawierać tylko litery"]}),computed:{formTitle(){return-1===this.editedIndex?"Nowa kategoria":"Edytuj kategorie"},categories(){return this.$store.getters.getCategories}},watch:{dialog(t){t||this.close()}},created(){this.$store.dispatch("fetchCategories",{})},methods:{editCategory(t){this.editedIndex=this.categories.indexOf(t),this.editedItem={...t},this.addCategoryDialog=!0},deleteCategory(t){const e=this.categories.indexOf(t);this.$swal({title:"Czy jesteś pewien, że chcesz usunąć tę kategorię?",icon:"question",showCancelButton:!0,confirmButtonText:"Usuń",cancelButtonText:"Anuluj"}).then(a=>{a.value?(o.a.delete("/api/category/delete/"+t.id,{}),this.categories.splice(e,1),this.$swal("Usunięto","Pomyślnie usunięto kategorię","success")):this.$swal("Anulowano","Akcja została anulowana","info")})},addCategory(){this.$refs.form.validate()&&(this.editedIndex>-1?(Object.assign(this.categories[this.editedIndex],this.editedItem),o.a.put("/api/category/edit/"+this.editedItem.id,{name:this.editedItem.name})):(this.categories.push(this.editedItem),o.a.post("/api/category/add",{name:this.editedItem.name}).then(()=>{const t=this.$swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,didOpen:t=>{t.addEventListener("mouseenter",this.$swal.stopTimer),t.addEventListener("mouseleave",this.$swal.resumeTimer)}});t.fire({icon:"success",title:"Dodano kategorię!"})}).catch(t=>{console.log(t)})),this.$store.dispatch("fetchCategories",{}),this.$refs.form.resetValidation(),this.close())},close(){this.addCategoryDialog=!1,this.$refs.form.resetValidation(),this.$nextTick(()=>{this.editedItem={...this.defaultItem},this.editedIndex=-1})}}},he=pe,ve=Object(y["a"])(he,ue,me,!1,null,"623212ae",null),fe=ve.exports,ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.publishers,search:t.search,"sort-by":"amount"},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Wydawnictwa")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"mr-3",attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"300px",persistent:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"#008D18",dark:""}},s),[t._v("Nowe wydawnictwo")])]}}]),model:{value:t.addPublisherDialog,callback:function(e){t.addPublisherDialog=e},expression:"addPublisherDialog"}},[a("v-card",[a("v-card-title",{staticStyle:{"justify-content":"center"}},[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-row",[a("v-col",[a("v-text-field",{attrs:{rules:t.publisherRules,label:"Wydawnictwo"},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"#008D18",text:""},on:{click:t.close}},[t._v("Anuluj")]),a("v-btn",{attrs:{color:"#008D18",text:"",disabled:!t.valid},on:{click:t.addPublisher}},[t._v("Zapisz")])],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(e){var s=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editPublisher(s)}}},[t._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deletePublisher(s)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("p",{staticClass:"pt-5"},[t._v("Brak wydawnictw")])]},proxy:!0}],null,!0)})},be=[],ye={name:"Publishers",data:()=>({addPublisherDialog:!1,valid:!1,search:"",publisherName:"",headers:[{text:"Wydawnictwa",align:"start",value:"name"},{text:"Akcje",value:"action",sortable:!1}],editedIndex:-1,editedItem:{name:""},defaultItem:{name:""},publisherRules:[t=>!!t||"Nazwa jest wymagana!"]}),computed:{formTitle(){return-1===this.editedIndex?"Nowe wydawnictwo":"Edytuj wydawnictwo"},publishers(){return this.$store.getters.getPublishers}},watch:{dialog(t){t||this.close()}},created(){this.$store.dispatch("fetchPublishers",{})},methods:{editPublisher(t){this.editedIndex=this.publishers.indexOf(t),this.editedItem={...t},this.addPublisherDialog=!0},deletePublisher(t){const e=this.publishers.indexOf(t);this.$swal({title:"Czy jesteś pewien, że chcesz usunąć te wydawnictwo?",icon:"question",showCancelButton:!0,confirmButtonText:"Usuń",cancelButtonText:"Anuluj"}).then(a=>{a.value?(o.a.delete("/api/publisher/delete/"+t.id,{}),this.publishers.splice(e,1),this.$swal("Usunięto","Pomyślnie usunięto wydawnictwo","success")):this.$swal("Anulowano","Akcja została anulowana","info")})},addPublisher(){this.$refs.form.validate()&&(this.editedIndex>-1?(Object.assign(this.publishers[this.editedIndex],this.editedItem),o.a.put("/api/publisher/edit/"+this.editedItem.id,{name:this.editedItem.name})):(this.publishers.push(this.editedItem),o.a.post("/api/publisher/add",{name:this.editedItem.name}).then(()=>{const t=this.$swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,didOpen:t=>{t.addEventListener("mouseenter",this.$swal.stopTimer),t.addEventListener("mouseleave",this.$swal.resumeTimer)}});t.fire({icon:"success",title:"Dodano wydawnictwo!"})}).catch(t=>{console.log(t)})),this.$store.dispatch("fetchPublishers",{}),this.$refs.form.resetValidation(),this.close())},close(){this.addPublisherDialog=!1,this.$refs.form.resetValidation(),this.$nextTick(()=>{this.editedItem={...this.defaultItem},this.editedIndex=-1})}}},we=ye,ke=Object(y["a"])(we,ge,be,!1,null,"19506fe0",null),xe=ke.exports,_e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,search:t.search,items:t.borrows,"sort-by":"title"},scopedSlots:t._u([{key:"item.fullName",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.name)+" "+t._s(a.surname)+" ")]}},{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Historia wypożyczeń")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"mr-3",attrs:{"append-icon":"mdi-magnify",label:"Szukaj","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer")],1)]},proxy:!0},{key:"no-data",fn:function(){return[a("p",{staticClass:"pt-5"},[t._v("Brak wypożyczeń")])]},proxy:!0},{key:"item.returns_date",fn:function(e){var s=e.item;return[a("v-chip",{attrs:{color:t.getColor(s.returns_date),dark:""}},[t._v(t._s(s.returns_date))])]}}],null,!0)})},je=[],ze={data:()=>({search:"",show:!1,borrows:[],headers:[{text:"Tytuł książki",align:"start",value:"title"},{text:"Czytelnik",value:"fullName"},{text:"Wypożyczenie",value:"borrows_date"},{text:"Termin zwrotu",value:"returns_date"},{text:"Opóźnienie",value:"delay"},{text:"Kara",value:"penalty"},{text:"Kiedy oddano",value:"when_returned"}]}),methods:{setData(t){this.borrows=t},getColor(t){const e=new Date,a=new Date(t),s=a.getTime()-e.getTime(),i=Math.round(s/864e5);return i<0?"red":i<7?"orange":"green"}},beforeRouteEnter(t,e,a){axios.get("/api/borrow/history").then(t=>{a(e=>e.setData(t.data))})}},Ce=ze,Ie=Object(y["a"])(Ce,_e,je,!1,null,null,null),$e=Ie.exports,Se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,search:t.search,items:t.borrows,"sort-by":"title"},scopedSlots:t._u([{key:"item.fullName",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.name)+" "+t._s(a.surname)+" ")]}},{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Wypożyczenia")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"mr-3",attrs:{"append-icon":"mdi-magnify",label:"Szukaj","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),[a("v-btn",{staticClass:"mb-2",attrs:{color:"#008D18",dark:"",to:"/add-borrow"}},[t._v("Dodaj wypożyczenie")])],a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.editBorrowDialog,callback:function(e){t.editBorrowDialog=e},expression:"editBorrowDialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"Wybierz datę wypożyczenia","prepend-icon":"mdi-calendar",readonly:"",rules:t.borrowsRules},model:{value:t.editedItem.borrows_date,callback:function(e){t.$set(t.editedItem,"borrows_date",e)},expression:"editedItem.borrows_date"}},"v-text-field",i,!1),s))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-date-picker",{on:{input:function(e){t.menu=!1}},model:{value:t.editedItem.borrows_date,callback:function(e){t.$set(t.editedItem,"borrows_date",e)},expression:"editedItem.borrows_date"}})],1)],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("Anuluj")]),a("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:!t.valid},on:{click:t.addBorrow}},[t._v("Zapisz")])],1)],1)],1)],2)]},proxy:!0},{key:"item.actions",fn:function(e){var s=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editBorrow(s)}}},[t._v(" mdi-pencil ")])]}},{key:"no-data",fn:function(){return[a("p",{staticClass:"pt-5"},[t._v("Brak wypożyczeń")])]},proxy:!0},{key:"item.is_available",fn:function(e){var s=e.item;return[a("v-simple-checkbox",{on:{click:function(e){return t.returnBook(s)}},model:{value:s.is_available,callback:function(e){t.$set(s,"is_available",e)},expression:"item.is_available"}})]}},{key:"item.returns_date",fn:function(e){var s=e.item;return[a("v-chip",{attrs:{color:t.getColor(s.returns_date),dark:""}},[t._v(t._s(s.returns_date))])]}}],null,!0)})},Re=[],Be={data:()=>({editBorrowDialog:!1,valid:!1,search:"",borrows:[],show:!1,menu:!1,headers:[{text:"Tytuł książki",align:"start",value:"title"},{text:"Czytelnik",value:"fullName"},{text:"Wypożyczenie",value:"borrows_date"},{text:"Termin zwrotu",value:"returns_date"},{text:"Potwierdź oddanie",value:"is_available"},{text:"Akcje",value:"actions",sortable:!1}],editedIndex:-1,editedItem:{title:"",fullName:"",borrows_date:"",returns_date:""},defaultItem:{title:"",fullName:"",borrows_date:"",returns_date:""},borrowsRules:[t=>!!t||"Data wypożyczenia jest wymagana"]}),computed:{formTitle(){return this.editedIndex,"Edytuj dane o wypożyczeniu"}},methods:{setData(t){this.borrows=t},editBorrow(t){this.editedIndex=this.borrows.indexOf(t),this.editedItem={...t},this.editBorrowDialog=!0},addBorrow(){this.$refs.form.validate()&&(this.editedIndex>-1&&(Object.assign(this.borrows[this.editedIndex],this.editedItem),o.a.put("/api/borrow/edit/"+this.editedItem.id,{borrows_date:this.editedItem.borrows_date})),this.close(),this.$store.dispatch("fetchBorrows",{}))},close(){this.editBorrowDialog=!1,this.$nextTick(()=>{this.editedItem={...this.defaultItem},this.editedIndex=-1})},getColor(t){const e=new Date,a=new Date(t),s=a.getTime()-e.getTime(),i=Math.round(s/864e5);return i<3?"red":i<10?"orange":"green"},returnBook(t){this.$swal({title:"Czy jesteś pewien, że chcesz potwierdzić oddanie książki?",icon:"question",showCancelButton:!0,confirmButtonText:"Zwróć",cancelButtonText:"Anuluj"}).then(e=>{e.value?(o.a.put("/api/borrow/returnBook/"+t.id,{is_available:t.is_available,bookID:t.bookID}),this.$swal("Zatwierdzono","Pomyślnie zwrócono książkę do biblioteki","success")):this.$swal("Anulowano","Akcja została anulowana","info"),o.a.get("/api/borrow/getBorrows").then(t=>{this.borrows=t.data})})}},beforeRouteEnter(t,e,a){o.a.get("/api/borrow/getBorrows").then(t=>{a(e=>e.setData(t.data))})}},De=Be,Ae=Object(y["a"])(De,Se,Re,!1,null,null,null),Te=Ae.exports,Ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,search:t.search,items:t.borrows,"sort-by":"title"},scopedSlots:t._u([{key:"item.fullName",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.name)+" "+t._s(a.surname)+" ")]}},{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Opóźnienia i kary")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"mr-3",attrs:{"append-icon":"mdi-magnify",label:"Szukaj","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer")],1)]},proxy:!0},{key:"no-data",fn:function(){return[a("p",{staticClass:"pt-5"},[t._v("Brak opóźnień")])]},proxy:!0}],null,!0)})},Pe=[],Oe={data:()=>({search:"",show:!1,borrows:[],headers:[{text:"Tytuł książki",align:"start",value:"title"},{text:"Czytelnik",value:"fullName"},{text:"Opóźnienie (dni)",value:"delay"},{text:"Kara pieniężna (zł)",value:"penalty"}]}),methods:{setData(t){this.borrows=t}},beforeRouteEnter(t,e,a){axios.get("/api/borrow/getDelayed").then(t=>{a(e=>e.setData(t.data))})}},Ne=Oe,We=Object(y["a"])(Ne,Ee,Pe,!1,null,null,null),Le=We.exports,Ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.events,search:t.search,"sort-by":"amount"},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Wydarzenia")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"mr-3",attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"350px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"#008D18",dark:""}},s),[t._v("Nowe wydarzenie")])]}}]),model:{value:t.addEventDialog,callback:function(e){t.addEventDialog=e},expression:"addEventDialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-row",[a("v-col",[a("v-text-field",{attrs:{rules:t.nameRules,label:"Wydarzenie"},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1)],1),a("v-row",[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"Wybierz datę wydarzenia","prepend-icon":"mdi-calendar",readonly:"",rules:t.dateRules},model:{value:t.editedItem.date,callback:function(e){t.$set(t.editedItem,"date",e)},expression:"editedItem.date"}},"v-text-field",i,!1),s))]}}]),model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[a("v-date-picker",{on:{input:function(e){t.menu1=!1}},model:{value:t.editedItem.date,callback:function(e){t.$set(t.editedItem,"date",e)},expression:"editedItem.date"}})],1)],1),a("v-row",[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"Wybierz czas wydarzenia","prepend-icon":"mdi-calendar",readonly:"",rules:t.timeRules},model:{value:t.editedItem.time,callback:function(e){t.$set(t.editedItem,"time",e)},expression:"editedItem.time"}},"v-text-field",i,!1),s))]}}]),model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[a("v-time-picker",{attrs:{format:"24hr"},on:{input:function(e){t.menu2=!1}},model:{value:t.editedItem.time,callback:function(e){t.$set(t.editedItem,"time",e)},expression:"editedItem.time"}})],1)],1),a("v-row",[a("v-autocomplete",{attrs:{items:t.types,"item-text":"name","item-value":"id","menu-props":"auto",label:"Typ",outlined:"",required:"",rules:t.typeRules},model:{value:t.selectedType,callback:function(e){t.selectedType=e},expression:"selectedType"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"#008D18",text:""},on:{click:t.close}},[t._v("Anuluj")]),a("v-btn",{attrs:{color:"#008D18",text:"",disabled:!t.valid},on:{click:t.addEvent}},[t._v("Zapisz")])],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(e){var s=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editEvent(s)}}},[t._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteEvent(s)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("p",{staticClass:"pt-5"},[t._v("Brak wydarzeń")])]},proxy:!0}],null,!0)})},Ze=[],qe={name:"Events",data:()=>({addEventDialog:!1,valid:!1,menu1:!1,menu2:!1,selectedType:"",events:[],search:"",eventName:"",headers:[{text:"Wydarzenia",align:"start",value:"name"},{text:"Data",value:"date"},{text:"Czas",value:"time"},{text:"Typ",value:"typeName"},{text:"Akcje",value:"action",sortable:!1}],editedIndex:-1,editedItem:{name:"",date:"",time:""},defaultItem:{name:"",date:"",time:""},nameRules:[t=>!!t||"Nazwa jest wymagana!"],dateRules:[t=>!!t||"Data wydarzenia jest wymagana"],timeRules:[t=>!!t||"Czas wydarzenia jest wymagany"],typeRules:[t=>!!t||"Typ wydarzenia jest wymagany!"]}),computed:{formTitle(){return-1===this.editedIndex?"Nowe wydarzenie":"Edytuj wydarzenie"},types(){return this.$store.getters.getTypes}},created(){this.$store.dispatch("fetchTypes",{})},methods:{setData(t){this.events=t},editEvent(t){this.editedIndex=this.events.indexOf(t),this.editedItem={...t},this.addEventDialog=!0},deleteEvent(t){const e=this.events.indexOf(t);this.$swal({title:"Czy jesteś pewien, że chcesz usunąć te wydarzenie?",icon:"question",showCancelButton:!0,confirmButtonText:"Usuń",cancelButtonText:"Anuluj"}).then(a=>{a.value?(o.a.delete("/api/calendar/event/delete/"+t.id,{}),this.events.splice(e,1),this.$swal("Usunięto","Pomyślnie usunięto wydarzenie","success")):this.$swal("Anulowano","Akcja została anulowana","info")})},addEvent(){this.$refs.form.validate()&&(this.editedIndex>-1?(Object.assign(this.events[this.editedIndex],this.editedItem),o.a.put("/api/calendar/event/edit/"+this.editedItem.id,{name:this.editedItem.name,date:this.editedItem.date,time:this.editedItem.time,type_id:this.selectedType})):(this.events.push(this.editedItem),o.a.post("/api/calendar/event/add",{name:this.editedItem.name,date:this.editedItem.date,time:this.editedItem.time,type_id:this.selectedType}).catch(t=>{console.log(t)})),o.a.get("/api/calendar/event/getEvents").then(t=>{this.events=t.data}),this.$refs.form.resetValidation(),this.$refs.form.reset(),this.close())},close(){this.addEventDialog=!1,this.$nextTick(()=>{this.editedItem={...this.defaultItem},this.editedIndex=-1})}},beforeRouteEnter(t,e,a){o.a.get("/api/calendar/event/getEvents").then(t=>{a(e=>e.setData(t.data))})}},Fe=qe,Me=Object(y["a"])(Fe,Ue,Ze,!1,null,"5c84c203",null),Ge=Me.exports,Ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.types,search:t.search,"sort-by":"amount"},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Typy wydarzeń")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"mr-3",attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"300px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"#008D18",dark:""}},s),[t._v("Nowy typ")])]}}]),model:{value:t.addTypeDialog,callback:function(e){t.addTypeDialog=e},expression:"addTypeDialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-row",[a("v-col",[a("v-text-field",{attrs:{rules:t.typeRules,label:"Typ"},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"#008D18",text:""},on:{click:t.close}},[t._v("Anuluj")]),a("v-btn",{attrs:{color:"#008D18",text:"",disabled:!t.valid},on:{click:t.addType}},[t._v("Zapisz")])],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(e){var s=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editType(s)}}},[t._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteType(s)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("p",{staticClass:"pt-5"},[t._v("Brak typów")])]},proxy:!0}],null,!0)})},He=[],Ye={name:"Types",data:()=>({addTypeDialog:!1,valid:!1,search:"",typeName:"",types:[],headers:[{text:"Typy",align:"start",value:"name"},{text:"Akcje",value:"action",sortable:!1}],editedIndex:-1,editedItem:{name:""},defaultItem:{name:""},typeRules:[t=>!!t||"Nazwa jest wymagana!",t=>/^[a-zA-ZąęćżźńłóśĄĆĘŁŃÓŚŹŻ\s]+$/.test(t)||"Nazwa typu powinna zawierać tylko litery"]}),computed:{formTitle(){return-1===this.editedIndex?"Nowy typ":"Edytuj typ"}},methods:{setData(t){this.types=t},editType(t){this.editedIndex=this.types.indexOf(t),this.editedItem={...t},this.addTypeDialog=!0},deleteType(t){const e=this.types.indexOf(t);this.$swal({title:"Czy jesteś pewien, że chcesz usunąć ten typ wydarzenia?",icon:"question",showCancelButton:!0,confirmButtonText:"Usuń",cancelButtonText:"Anuluj"}).then(a=>{a.value?(o.a.delete("/api/calendar/type/delete/"+t.id,{}),this.types.splice(e,1),this.$swal("Usunięto","Pomyślnie usunięto typ","success")):this.$swal("Anulowano","Akcja została anulowana","info")})},addType(){this.$refs.form.validate()&&(this.editedIndex>-1?(Object.assign(this.types[this.editedIndex],this.editedItem),o.a.put("/api/calendar/type/edit/"+this.editedItem.id,{name:this.editedItem.name})):(this.types.push(this.editedItem),o.a.post("/api/calendar/type/add",{name:this.editedItem.name}).catch(t=>{console.log(t)})),this.$store.dispatch("fetchTypes",{}),this.$refs.form.resetValidation(),this.close())},close(){this.addTypeDialog=!1,this.$nextTick(()=>{this.editedItem={...this.defaultItem},this.editedIndex=-1})}},beforeRouteEnter(t,e,a){o.a.get("/api/calendar/type/getTypes").then(t=>{a(e=>e.setData(t.data))})}},Ve=Ye,Je=Object(y["a"])(Ve,Ke,He,!1,null,"d9f54544",null),Xe=Je.exports,Qe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",staticStyle:{"word-break":"initial"},attrs:{headers:t.headers,search:t.search,items:t.suggestions,"sort-by":"card_number"},scopedSlots:t._u([{key:"item.fullName",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.name)+" "+t._s(a.surname)+" ")]}},{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Sugestie")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"mr-3",attrs:{"append-icon":"mdi-magnify",label:"Szukaj","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer")],1)]},proxy:!0},{key:"item.actions",fn:function(e){var s=e.item;return[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteSugestion(s)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("p",{staticClass:"pt-5"},[t._v("Brak sugestii")])]},proxy:!0}],null,!0)})},ta=[],ea={data:()=>({search:"",suggestions:[],headers:[{text:"Rodzaj sugestii",align:"start",value:"type"},{text:"Opis",value:"description"},{text:"Czytelnik",value:"fullName"},{text:"Akcje",value:"actions",sortable:!1}]}),methods:{setData(t){this.suggestions=t},deleteSugestion(t){const e=this.suggestions.indexOf(t);this.$swal({title:"Czy jesteś pewien, że chcesz usunąć tę sugestię?",icon:"question",showCancelButton:!0,confirmButtonText:"Usuń",cancelButtonText:"Anuluj"}).then(a=>{a.value?(o.a.delete("/api/suggestions/delete/"+t.id,{}),this.suggestions.splice(e,1),this.$swal("Usunięto","Pomyślnie usunięto sugestię użytkownika","success")):this.$swal("Anulowano","Akcja została anulowana","info")})}},beforeRouteEnter(t,e,a){o.a.get("/api/suggestions/getSuggestions").then(t=>{a(e=>e.setData(t.data))})}},aa=ea,sa=Object(y["a"])(aa,Qe,ta,!1,null,null,null),ia=sa.exports,oa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",{staticStyle:{"justify-content":"center"}},[a("v-col",{attrs:{md:"8"}},[a("v-sheet",{staticClass:"d-flex",attrs:{tile:"",height:"64",color:"grey lighten-3"}},[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-btn",{staticClass:"mr-md-4",attrs:{outlined:"",color:"grey darken-2",id:"today"},on:{click:t.setToday}},[t._v(" Today ")]),a("v-btn",{staticClass:"ma-md-2",attrs:{icon:""},nativeOn:{click:function(e){return t.$refs.calendar.prev()}}},[a("v-icon",[t._v("mdi-chevron-left")])],1),a("v-toolbar-title",[t._v(t._s(t.title))]),a("v-btn",{staticClass:"ma-md-2",attrs:{icon:""},nativeOn:{click:function(e){return t.$refs.calendar.next()}}},[a("v-icon",[t._v("mdi-chevron-right")])],1)],1)],1),a("v-sheet",[a("v-calendar",{ref:"calendar",attrs:{id:"calendar",weekdays:t.weekday,type:"month",color:"#00A91C",events:t.getEvents,"event-color":t.getEventColor,"interval-count":0},on:{change:t.updateRange,"click:more":t.viewDay,"click:date":t.viewDay},model:{value:t.focus,callback:function(e){t.focus=e},expression:"focus"}})],1),a("div",[a("v-toolbar",[a("h1",{staticClass:"headline mr-10"},[t._v("Legenda")]),t._l(t.legendInfo(),(function(e){return a("v-chip",{key:e.id,staticClass:"mr-6",staticStyle:{"font-weight":"bold"},attrs:{color:e.color},on:{click:function(a){return t.showEvent(e)}}},[t._v(t._s(e.type))])})),a("v-chip",{staticClass:"mr-6",staticStyle:{"font-weight":"bold"},attrs:{color:"#B5651D"},on:{click:function(e){return t.allEvents()}}},[t._v("Wszystkie")])],2)],1)],1),a("v-dialog",{attrs:{"max-width":"500"},model:{value:t.dailyModal,callback:function(e){t.dailyModal=e},expression:"dailyModal"}},[a("v-sheet",{staticClass:"mx-auto",staticStyle:{"text-align":"center"},attrs:{elevation:"8"}},[a("v-carousel",{staticStyle:{height:"180px",width:"500px"},attrs:{cycle:"","hide-delimiters":"","show-arrows-on-hover":""}},t._l(t.eventInfo(),(function(e){return a("v-carousel-item",{key:e.id},[a("v-card",{staticClass:"ma-4",attrs:{color:e.color}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("p",{staticStyle:{"font-weight":"bold","padding-top":"5px"}},[t._v(t._s(e.type))])]),a("v-row",{attrs:{align:"center",justify:"center"}},[a("h3",{staticStyle:{"font-weight":"bold","line-height":"4.8"}},[t._v(t._s(e.name))])]),a("v-row",{attrs:{align:"center",justify:"center"}},[a("span",{staticStyle:{"font-weight":"bold"}},[t._v("Serdecznie zapraszamy na godzinę "+t._s(e.time)+"!")])])],1)],1)})),1)],1)],1)],1)],1)},ra=[],na={name:"Calendar",data:()=>({type:"month",focus:"",dailyModal:!1,selectedElement:null,selectedOpen:!1,start:null,merged:"",eventColor:"",weekday:[1,2,3,4,5,6,0],libraryEvent:[],librarySelected:[],colors:["blue","green","orange","grey darken-1","red","yellow","pink"]}),computed:{types(){return this.$store.getters.getTypes},events(){return this.$store.getters.getEvents},title(){const{start:t}=this;if(!t)return"";const e=this.monthFormatter(t),a=t.year;return`${e} ${a}`},monthFormatter(){return this.$refs.calendar.getFormatter({timeZone:"UTC",month:"long"})},getEvents(){this.libraryEvent=[];for(let t=0;t<this.events.length;t++){for(let e=0;e<this.types.length;e++)this.events[t].typeName===this.types[e].name&&(this.eventColor=this.colors[e]);this.libraryEvent.push({name:`${this.events[t].time} - ${this.events[t].name}`,start:this.events[t].date,color:this.eventColor})}return this.librarySelected.length>0?this.librarySelected:this.libraryEvent}},created(){this.$store.dispatch("fetchTypes",{}),this.$store.dispatch("fetchEvents",{})},methods:{getEventColor(t){return t.color},setToday(){this.focus=this.today},updateRange({start:t,end:e}){this.start=t,this.end=e},viewDay({date:t}){this.focus=t,this.eventInfo().length>0&&(this.dailyModal=!0)},eventInfo(){const t=[];for(let e=0;e<this.events.length;e++)this.events[e].date===this.focus&&t.push({name:this.events[e].name,type:this.events[e].typeName,time:this.events[e].time,color:this.libraryEvent[e].color});return t},legendInfo(){const t=[];let e=[],a=[];for(let s=0;s<this.events.length;s++)e[s]=this.libraryEvent[s].color,a[s]=this.events[s].typeName;e=Array.from(new Set(e)),a=Array.from(new Set(a));for(let s=0;s<e.length;s++)t.push({type:a[s],color:e[s]});return t},showEvent(t){this.librarySelected=[];for(let e=0;e<this.libraryEvent.length;e++)this.libraryEvent[e].color===t.color&&this.librarySelected.push({name:`${this.events[e].time} - ${this.events[e].name}`,start:this.events[e].date,color:this.libraryEvent[e].color});return this.librarySelected},allEvents(){this.librarySelected=[];for(let t=0;t<this.events.length;t++){for(let e=0;e<this.types.length;e++)this.events[t].typeName===this.types[e].name&&(this.eventColor=this.colors[e]);this.librarySelected.push({name:`${this.events[t].time} - ${this.events[t].name}`,start:this.events[t].date,color:this.eventColor})}return this.librarySelected}}},la=na,da=(a("71cd"),Object(y["a"])(la,oa,ra,!1,null,null,null)),ca=da.exports,ua=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-data-iterator",{attrs:{items:t.books,"items-per-page":t.itemsPerPage,page:t.page,search:t.search,"sort-by":t.sortBy.toLowerCase(),"sort-desc":t.sortDesc,"hide-default-footer":""},on:{"update:itemsPerPage":function(e){t.itemsPerPage=e},"update:items-per-page":function(e){t.itemsPerPage=e}},scopedSlots:t._u([{key:"header",fn:function(){return[a("v-toolbar",{staticClass:"mb-1",attrs:{dark:"",color:"#008D18"}},[a("v-text-field",{attrs:{clearable:"",flat:"","solo-inverted":"","hide-details":"","prepend-inner-icon":"mdi-magnify",label:"Wyszukaj"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t.$vuetify.breakpoint.mdAndUp?[a("v-spacer"),a("v-select",{attrs:{flat:"","solo-inverted":"","hide-details":"",items:t.keys,"prepend-inner-icon":"mdi-sort",label:"Sortuj według"},model:{value:t.sortBy,callback:function(e){t.sortBy=e},expression:"sortBy"}}),a("v-spacer"),a("v-btn-toggle",{attrs:{mandatory:""},model:{value:t.sortDesc,callback:function(e){t.sortDesc=e},expression:"sortDesc"}},[a("v-btn",{attrs:{large:"",depressed:"",color:"#008D18",value:!1}},[a("v-icon",[t._v("mdi-arrow-up")])],1),a("v-btn",{attrs:{large:"",depressed:"",color:"#008D18",value:!0}},[a("v-icon",[t._v("mdi-arrow-down")])],1)],1)]:t._e()],2)]},proxy:!0},{key:"default",fn:function(e){return[a("v-row",t._l(e.items,(function(e){return a("v-col",{key:e.name,staticStyle:{display:"flex","justify-content":"center"},attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[a("v-card",[a("v-card-title",{staticStyle:{"justify-content":"center"}},[a("span",{domProps:{textContent:t._s(e.title)}})]),a("v-divider"),a("v-img",{staticStyle:{width:"300px",height:"400px"},attrs:{src:"https://library-site.s3.eu-north-1.amazonaws.com/covers/"+e.cover}}),a("v-divider"),a("v-card-text",{staticStyle:{"justify-content":"center","text-align":"center"}},[a("p",[t._v("Autor: "),a("span",{staticClass:"mr-2",domProps:{textContent:t._s(e.authorName+" "+e.surname)}})]),a("p",[t._v("Kategoria: "),a("span",{staticClass:"mr-2",domProps:{textContent:t._s(e.categoryName)}})]),a("p",[t._v("Dostępna ilość książek: "),a("v-chip",{attrs:{color:t.getColor(e.amount),dark:""},domProps:{textContent:t._s(e.amount)}})],1),a("v-divider"),e.id?[a("router-link",{attrs:{to:{name:"bookview",params:{book_id:e.id}}}},[a("v-btn",{staticStyle:{border:"0px","text-decoration":"none"},attrs:{outlined:""}},[a("v-card-title",{staticStyle:{color:"#008D18","font-weight":"bold"}},[t._v("Zobacz więcej")])],1)],1)]:t._e()],2)],1)],1)})),1)]}},{key:"footer",fn:function(){return[a("v-row",{staticClass:"mt-2",attrs:{align:"center",justify:"center"}},[a("span",{staticClass:"grey--text"},[t._v("Items per page")]),a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"ml-2",attrs:{dark:"",text:"",color:"#008D18"}},"v-btn",i,!1),s),[t._v(" "+t._s(t.itemsPerPage)+" "),a("v-icon",[t._v("mdi-chevron-down")])],1)]}}])},[a("v-list",t._l(t.itemsPerPageArray,(function(e,s){return a("v-list-item",{key:s,on:{click:function(a){return t.updateItemsPerPage(e)}}},[a("v-list-item-title",[t._v(t._s(e))])],1)})),1)],1),a("v-spacer"),a("span",{staticClass:"mr-4\n          grey--text"},[t._v(" Page "+t._s(t.page)+" of "+t._s(t.numberOfPages)+" ")]),a("v-btn",{staticClass:"mr-1",attrs:{fab:"",dark:"",color:"#008D18"},on:{click:t.formerPage}},[a("v-icon",[t._v("mdi-chevron-left")])],1),a("v-btn",{staticClass:"ml-1",staticStyle:{"margin-right":"15px"},attrs:{fab:"",dark:"",color:"#008D18"},on:{click:t.nextPage}},[a("v-icon",[t._v("mdi-chevron-right")])],1)],1)]},proxy:!0}])})],1)},ma=[],pa={data:()=>({itemsPerPageArray:[4,8,12],search:"",filter:{},sortDesc:!1,page:1,books:[],itemsPerPage:4,sortBy:"title",keys:["Title","authorName","surname","categoryName","amount"],items:[{title:"",authorName:"",surname:"",categoryName:"",isbn:"",description:"",publish_year:"",publisherName:"",amount:"",cover:""}]}),computed:{numberOfPages(){return Math.ceil(this.books.length/this.itemsPerPage)},filteredKeys(){return this.keys.filter(t=>"Name"!==t)}},watch:{dialog(t){t||this.close()}},methods:{setData(t){this.books=t},nextPage(){this.page+1<=this.numberOfPages&&(this.page+=1)},formerPage(){this.page-1>=1&&(this.page-=1)},updateItemsPerPage(t){this.itemsPerPage=t},getColor(t){return 0===t?"red":1===t||2===t?"orange":"green"}},beforeRouteEnter(t,e,a){axios.get("/api/book/getBooks").then(t=>{a(e=>e.setData(t.data))})}},ha=pa,va=Object(y["a"])(ha,ua,ma,!1,null,null,null),fa=va.exports,ga=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{staticStyle:{"text-align":"center"}},[s("v-row",{staticStyle:{"text-align":"center","justify-content":"center","padding-bottom":"10px","padding-top":"20px"}},[s("h1",[t._v("Nowości książkowe")])]),0!=t.books.length?s("v-row",{staticStyle:{"justify-content":"center","text-align":"center"}},[s("v-col",{attrs:{md:"6"}},[s("swiper",{ref:"mySwiper",attrs:{options:t.swiperOptions}},[t._l(t.books,(function(e){return s("swiper-slide",{key:e.name},[s("v-card",{staticClass:"card",staticStyle:{border:"1px solid black"}},[s("v-card-title",{staticStyle:{"justify-content":"center"}},[s("span",{domProps:{textContent:t._s(e.title)}})]),s("v-divider"),s("v-img",{staticStyle:{display:"inline-block"},attrs:{src:"https://library-site.s3.eu-north-1.amazonaws.com/covers/"+e.cover,width:"300px"}}),s("v-divider"),s("v-card-text",{staticStyle:{"justify-content":"center",padding:"0","margin-bottom":"15px"}},[s("p",[t._v("Autor: "),s("span",{staticClass:"mr-2",domProps:{textContent:t._s(e.authorName+" "+e.surname)}})]),s("p",[t._v("Kategoria: "),s("span",{staticClass:"mr-2",domProps:{textContent:t._s(e.categoryName)}})]),s("router-link",{attrs:{to:{name:"bookview",params:{book_id:e.id}}}},[s("v-btn",{staticStyle:{border:"0px","text-decoration":"none"},attrs:{outlined:""}},[s("v-card-title",{staticStyle:{color:"#008D18","font-weight":"bold"}},[t._v("Zobacz więcej")])],1)],1)],1)],1)],1)})),s("div",{staticClass:"swiper-button-prev",attrs:{slot:"button-prev"},slot:"button-prev"}),s("div",{staticClass:"swiper-button-next",attrs:{slot:"button-next"},slot:"button-next"})],2)],1)],1):t._e(),0===t.books.length?s("v-row",{staticStyle:{"justify-content":"center","text-align":"center","padding-top":"55px",display:"inline-block"},attrs:{align:"center"}},[s("h2",[t._v("Brak nowych książek z ostatnich 10 dni!")]),s("v-col",{staticStyle:{display:"inline-flex"}},[s("v-img",{attrs:{src:a("71dd")}}),s("div",{staticStyle:{padding:"180px 0"}},[s("h4",{staticStyle:{"padding-bottom":"20px"}},[t._v("Zapraszamy do przejrzenia katalogu biblioteki!")]),s("router-link",{attrs:{to:{name:"search"}}},[s("v-btn",{staticClass:"white--text mr-5 mb-6 font-weight-bold",attrs:{elevation:"24","x-large":"",color:"#008D18"}},[t._v(" KATALOG ")])],1)],1)],1)],1):t._e()],1)},ba=[],ya=a("7212"),wa=(a("a7a3"),{name:"carrousel",components:{Swiper:ya["Swiper"],SwiperSlide:ya["SwiperSlide"]},data(){return{swiperOptions:{slidesPerView:1,spaceBetween:30,loop:!1,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}}},computed:{books(){return this.$store.getters.getBooks}},created(){this.$store.dispatch("fetchNewBooks",{})},methods:{}}),ka=wa,xa=Object(y["a"])(ka,ga,ba,!1,null,null,null),_a=xa.exports,ja=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",{staticStyle:{"margin-left":"10px","margin-right":"10px"}},[a("v-col",{staticStyle:{"justify-content":"center","text-align":"center"},attrs:{md:"3"}},[a("v-avatar",{attrs:{size:"200"}},[a("v-img",{staticClass:"card-img",attrs:{src:"https://library-site.s3.eu-north-1.amazonaws.com/authors/"+t.authors.photo}})],1)],1),a("v-col",{staticStyle:{"text-align":"left"}},[a("h2",[t._v(t._s(t.authors.name+" "+t.authors.surname))]),a("v-divider"),a("p",[t._v(t._s(t.authors.description))]),t.loggedUser.card_number?a("v-btn",{attrs:{outlined:"",color:"#008D18"},on:{click:function(e){return t.followAuthor()}}},[t._v(" DODAJ DO ULUBIONYCH "),a("v-icon",{staticStyle:{"padding-left":"10px"},attrs:{color:"#FFD700"}},[t._v("mdi-star")])],1):t._e()],1)],1),a("v-divider"),a("v-row",{staticStyle:{"margin-left":"10px","margin-right":"10px","justify-content":"center"}},[a("AuthorBooks",{attrs:{author_id:t.author_id}})],1)],1)},za=[],Ca=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("h1",{staticStyle:{"text-align":"center","padding-bottom":"10px"}},[t._v("Książki tego autora:")]),a("v-row",{staticStyle:{"justify-content":"space-around","text-align":"center"}},t._l(t.books,(function(e){return a("v-col",{key:e.name,staticStyle:{display:"flex","justify-content":"center"},attrs:{cols:"10",sm:"6",md:"4",lg:"3"}},[a("v-card",{staticClass:"card fill-height"},[a("v-card-title",{staticStyle:{"justify-content":"center","padding-top":"30px"}},[a("span",{domProps:{textContent:t._s(e.title)}})]),a("v-divider"),a("v-img",{staticStyle:{width:"300px",height:"400px",display:"inline-block"},attrs:{src:"https://library-site.s3.eu-north-1.amazonaws.com/covers/"+e.cover}}),a("v-divider"),a("v-card-text",{staticStyle:{"justify-content":"center","padding-top":"5px"}},[a("p",[t._v("Kategoria: "),a("span",{staticClass:"mr-2",domProps:{textContent:t._s(e.categoryName)}})]),a("p",[t._v("Wydawnictwo: "),a("span",{staticClass:"mr-2",domProps:{textContent:t._s(e.publisherName)}})]),a("p",[t._v("Opis: "),a("span",{staticClass:"mr-2",domProps:{textContent:t._s(e.description)}})]),a("p",[t._v("Rok wydania: "),a("span",{staticClass:"mr-2",domProps:{textContent:t._s(e.publish_year)}})]),a("v-divider"),a("router-link",{attrs:{to:{name:"bookview",params:{book_id:e.id}}}},[a("v-btn",{staticStyle:{border:"0px","text-decoration":"none"},attrs:{outlined:""}},[a("v-card-title",{staticStyle:{color:"#008D18","font-weight":"bold"}},[t._v("Zobacz więcej")])],1)],1)],1)],1)],1)})),1)],1)},Ia=[],$a={name:"AuthorBooks",props:["author_id"],data:()=>({}),computed:{books(){return this.$store.getters.getBooks}},created(){this.$store.dispatch("fetchAuthorBook",this.author_id)},methods:{}},Sa=$a,Ra=Object(y["a"])(Sa,Ca,Ia,!1,null,null,null),Ba=Ra.exports,Da={name:"AuthorView",props:["author_id"],components:{AuthorBooks:Ba},data:()=>({}),computed:{authors(){return this.$store.getters.getAuthors},authId(){return this.$store.getters.authId},loggedUser(){return this.$store.getters.loggedUser}},created(){this.$store.dispatch("fetchOneAuthor",this.author_id)},methods:{followAuthor(){axios.post("/api/follow/addAuthor",{user_id:this.authId,author_id:parseInt(this.author_id)}).then(t=>{const e=this.$swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,didOpen:t=>{t.addEventListener("mouseenter",this.$swal.stopTimer),t.addEventListener("mouseleave",this.$swal.resumeTimer)}});e.fire({icon:"success",title:"Autor został dodany do listy ulubionych!"})}).catch(t=>{const e=this.$swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,didOpen:t=>{t.addEventListener("mouseenter",this.$swal.stopTimer),t.addEventListener("mouseleave",this.$swal.resumeTimer)}});e.fire({icon:"error",title:"Autor już istnieje na liście ulubionych!"})})}}},Aa=Da,Ta=Object(y["a"])(Aa,ja,za,!1,null,null,null),Ea=Ta.exports,Pa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticStyle:{"justify-content":"center",display:"flex"}},[a("v-card",{staticStyle:{width:"1000px"}},[a("v-row",{staticStyle:{"justify-content":"space-evenly","margin-left":"10px","margin-right":"10px"}},[a("v-col",{attrs:{cols:"auto"}},[a("v-img",{staticStyle:{"margin-top":"15px",width:"300px",height:"400px"},attrs:{src:"https://library-site.s3.eu-north-1.amazonaws.com/covers/"+t.books.cover}})],1),a("v-divider",{staticStyle:{"margin-left":"10px","margin-right":"10px"},attrs:{vertical:""}}),a("v-col",{staticClass:"text-center pl-0",attrs:{cols:"3"}},[a("v-row",{staticClass:"flex-column ma-0 fill-height",staticStyle:{"text-align":"left"}},[a("v-col",[a("h1",{staticStyle:{"font-weight":"bold","text-align":"center"},domProps:{textContent:t._s(t.books.title)}})]),a("v-col",{staticStyle:{"text-align":"center"}},[a("p",[t._v("Autor: ")]),t._l(t.books.authors,(function(e){return a("v-list-item-subtitle",{key:e.id},[e.id?a("router-link",{staticStyle:{"text-decoration":"none",color:"#008D18"},attrs:{to:{name:"authorview",params:{author_id:e.id}}}},[a("span",{staticClass:"mr-2",staticStyle:{"font-weight":"bold"},domProps:{textContent:t._s(e.name+" "+e.surname)}})]):t._e()],1)}))],2),a("v-col",{staticStyle:{"text-align":"center"}},[a("span",[t._v("Kategoria: ")]),a("span",{staticClass:"mr-2",staticStyle:{"font-weight":"bold"},domProps:{textContent:t._s(t.books.categories.name)}})]),a("v-col",[a("div",{staticClass:"text-center"},[a("span",[t._v("Ocena czytelników: ")]),a("v-rating",{attrs:{"background-color":"orange lighten-3",color:"orange",medium:"",readonly:""},model:{value:t.averages.avg,callback:function(e){t.$set(t.averages,"avg",e)},expression:"averages.avg"}}),t._v(" "+t._s(t.averages.avg)+"/5 "),a("span",[t._v(" | ")]),t._v(" "),a("span",[t._v("Opinie: "+t._s(t.averages.count))])],1)])],1)],1)],1),a("v-divider"),a("v-row",{staticStyle:{"text-align":"center","margin-left":"10px","margin-right":"10px"}},[a("v-col",{attrs:{cols:"auto"}},[a("v-col",{staticStyle:{"padding-top":"20px"}},[a("span",{staticStyle:{"font-weight":"bold"}},[t._v("Opis: ")]),a("span",{staticClass:"mr-2",domProps:{textContent:t._s(t.books.description)}})]),a("v-col",[a("h3",[t._v("Status: "),a("v-chip",{attrs:{color:t.getColor(t.books.amount),dark:""}},[t._v(t._s(t.status))])],1)])],1)],1),a("v-divider"),a("BookRating",{attrs:{book_id:t.book_id}})],1)],1)},Oa=[],Na=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[t.loggedUser.card_number&&!1===t.check?a("v-row",{staticStyle:{"justify-content":"center","margin-left":"10px","margin-right":"10px"}},[a("h2",{staticStyle:{width:"100%","text-align":"center"}},[t._v("Oceń książkę: ")]),a("v-form",{ref:"form",staticStyle:{width:"100%","text-align":"center"},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-rating",{attrs:{"background-color":"orange lighten-3",color:"orange",medium:"",rules:t.ratingRules},model:{value:t.rating,callback:function(e){t.rating=e},expression:"rating"}}),a("v-col",{attrs:{cols:"12"}},[a("v-textarea",{attrs:{label:"Napisz opinię","auto-grow":"",outlined:"",rows:"3","row-height":"25",rules:t.opinionRules},model:{value:t.opinion,callback:function(e){t.opinion=e},expression:"opinion"}})],1)],1),a("div",{staticClass:"mb-5"},[a("v-btn",{attrs:{large:"",color:"success",disabled:0==this.rating},on:{click:t.addOpinion}},[t._v("Wystaw opinię")])],1)],1):t._e(),t.loggedUser&&!0===t.check?a("v-row",{staticStyle:{"justify-content":"center",margin:"25px 10px"}},[a("h2",{staticStyle:{width:"100%","text-align":"center"}},[t._v("Serdecznie dziękujemy za wystawienie opinii!")]),a("v-icon",{attrs:{"x-large":""}},[t._v("mdi-emoticon-excited")])],1):t._e(),t.loggedUser?t._e():a("v-row",{staticStyle:{"justify-content":"center",margin:"25px 10px"}},[a("h2",{staticStyle:{width:"100%","text-align":"center"}},[t._v("Aby wystawić opinię należy się zalogować!")])]),a("v-divider"),a("v-row",{staticStyle:{"justify-content":"center","margin-left":"10px","margin-right":"10px"}},[a("h2",{staticStyle:{width:"100%","text-align":"center","padding-top":"20px"}},[t._v("Oceny i opinie czytelników: "+t._s(t.ratings.length))]),a("v-list",{staticStyle:{width:"100%"},attrs:{"two-line":""}},[a("v-list-item-group",[t._l(t.ratings,(function(e){return[a("v-list-item",{key:e.id+-e.rate},[a("v-list-item-content",[a("v-col",{staticStyle:{display:"inline-flex"},attrs:{cols:8}},[a("v-list-item-avatar",[a("v-img",{attrs:{src:"https://library-site.s3.eu-north-1.amazonaws.com/avatars/"+e.avatar}})],1),a("v-list-item-title",{domProps:{textContent:t._s(e.name+" "+e.surname)}}),a("v-rating",{staticStyle:{"padding-top":"15px"},attrs:{value:parseInt(e.rate),"background-color":"orange lighten-3",color:"orange",medium:"",readonly:""}})],1),a("v-list-item-subtitle",{staticClass:"text--primary",staticStyle:{"padding-top":"10px","margin-left":"10px"},domProps:{textContent:t._s(e.opinion)}})],1),a("v-list-item-action",[a("v-list-item-action-text",{domProps:{textContent:t._s(e.created_at)}}),a("div",{staticClass:"action"},[e.user_id===t.loggedUser.id?a("v-icon",{staticClass:"mr-2",on:{click:function(a){return t.editOpinion(e)}}},[t._v(" mdi-pencil ")]):t._e(),e.user_id===t.loggedUser.id||t.loggedUser.id_number?a("v-icon",{on:{click:function(a){return t.deleteOpinion(e)}}},[t._v(" mdi-delete ")]):t._e()],1)],1)],1),a("v-divider",{key:e.id})]}))],2)],1)],1),a("v-dialog",{attrs:{"max-width":"400px"},model:{value:t.editOpinionDialog,callback:function(e){t.editOpinionDialog=e},expression:"editOpinionDialog"}},[a("v-card",{staticStyle:{"text-align":"center"}},[a("v-card-title",{staticStyle:{"justify-content":"center"}},[a("span",{staticClass:"headline"},[t._v("Edytuj swoją opinię")])]),a("v-card-text",[a("v-container",[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-row",{staticStyle:{display:"inline-block"}},[a("v-rating",{attrs:{"background-color":"orange lighten-3",color:"orange",medium:"",rules:t.ratingRules},model:{value:t.editedItem.rate,callback:function(e){t.$set(t.editedItem,"rate",e)},expression:"editedItem.rate"}}),a("v-col",[a("v-textarea",{staticStyle:{width:"300px"},attrs:{label:"Napisz opinię","auto-grow":"",outlined:"",rows:"3","row-height":"25",rules:t.opinionRules},model:{value:t.editedItem.opinion,callback:function(e){t.$set(t.editedItem,"opinion",e)},expression:"editedItem.opinion"}})],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"#008D18",text:""},on:{click:t.close}},[t._v("Anuluj")]),a("v-btn",{attrs:{color:"#008D18",text:"",disabled:!t.valid},on:{click:t.addOpinion}},[t._v("Zapisz")])],1)],1)],1)],1)},Wa=[],La={name:"BookRating",props:["book_id"],data:()=>({opinion:"",rating:0,valid:!1,editOpinionDialog:!1,editedIndex:-1,editedItem:{opinion:"",rate:""},defaultItem:{opinion:"",rate:""},ratingRules:[t=>!!t||"Ocena jest wymagana!"],opinionRules:[t=>t.length<=500||"Opinia jest za długa!"]}),computed:{authStatus(){return this.$store.getters.authStatus},ratings(){return this.$store.getters.getRatings},loggedUser(){return this.$store.getters.loggedUser},check(){if(0!=this.ratings.length)for(let t=0;t<this.ratings.length;t++)if(this.ratings[t].user_id===this.loggedUser.id)return!0;return!1}},created(){this.$store.dispatch("fetchAverage",this.book_id),this.$store.dispatch("fetchRatings",this.book_id)},methods:{addOpinion(){this.$refs.form.validate()&&(this.editedIndex>-1?(Object.assign(this.ratings[this.editedIndex],this.editedItem),o.a.put("/api/rating/edit/"+this.editedItem.id,{opinion:this.editedItem.opinion,rate:this.editedItem.rate,book_id:parseInt(this.book_id)})):o.a.post("/api/rating/add",{rate:this.rating,opinion:this.opinion,book_id:parseInt(this.book_id)}).catch(t=>{console.log(t)})),this.$store.dispatch("fetchAverage",this.book_id),this.$store.dispatch("fetchRatings",this.book_id),this.close()},editOpinion(t){this.editedIndex=this.ratings.indexOf(t),this.editedItem={...t},this.editOpinionDialog=!0},deleteOpinion(t){const e=this.ratings.indexOf(t);this.$swal({title:"Czy jesteś pewien, że chcesz usunąć tę opinię?",icon:"question",showCancelButton:!0,confirmButtonText:"Usuń",cancelButtonText:"Anuluj"}).then(a=>{a.value?(o.a.delete("/api/rating/delete/"+t.id,{}),this.ratings.splice(e,1),this.$store.dispatch("fetchAverage",this.book_id),this.$store.dispatch("fetchRatings",this.book_id),this.$swal("Usunięto","Pomyślnie usunięto opinię","success")):this.$swal("Anulowano","Akcja została anulowana","info")})},close(){this.editOpinionDialog=!1,this.$nextTick(()=>{this.editedItem={...this.defaultItem},this.editedIndex=-1})}}},Ua=La,Za=Object(y["a"])(Ua,Na,Wa,!1,null,null,null),qa=Za.exports,Fa={name:"BookView",props:["book_id"],components:{BookRating:qa},data:()=>({status:"",rating:0}),computed:{books(){return this.$store.getters.getBooks},averages(){return this.$store.getters.getAverages}},created(){this.$store.dispatch("fetchOneBook",this.book_id),this.$store.dispatch("fetchAverage",this.book_id)},methods:{getColor(t){return 0===t?(this.status="Brak pozycji","red"):1===t||2===t?(this.status="Ostatnie sztuki!","orange"):(this.status="Dostępne","green")}}},Ma=Fa,Ga=Object(y["a"])(Ma,Pa,Oa,!1,null,null,null),Ka=Ga.exports,Ha=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",{staticStyle:{"margin-left":"10px","margin-right":"10px"}},[a("v-col",{staticStyle:{"justify-content":"center","text-align":"center"},attrs:{md:"3"}},[a("v-avatar",{attrs:{size:"200"}},[a("v-img",{staticClass:"card-img",attrs:{src:"https://library-site.s3.eu-north-1.amazonaws.com/avatars/"+t.readers.avatar}})],1),a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[this.$route.params.user_id.toString()===this.authId.toString()?a("div",{staticClass:"upload",staticStyle:{"padding-top":"15px"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.form1,callback:function(e){t.form1=e},expression:"form1"}},[a("v-file-input",{attrs:{accept:"image/png, image/jpeg, image/bmp",label:"Wybierz avatar",rules:t.photoRules,outlined:"",dense:"","prepend-icon":"","prepend-inner-icon":"mdi-camera","hide-details":""},model:{value:t.avatar,callback:function(e){t.avatar=e},expression:"avatar"}}),a("v-btn",{staticClass:"mt-3",attrs:{color:"success",rounded:"",block:"",disabled:!t.form1},on:{click:t.validate}},[t._v(" Zmień avatar ")])],1)],1):t._e()])],1),a("v-col",{staticStyle:{"text-align":"left"}},[a("h2",[t._v(t._s(t.readers.name+" "+t.readers.surname))]),a("v-divider"),a("p",[t._v("Email: "),a("span",{staticStyle:{"font-weight":"bold",color:"#008D18"}},[t._v(t._s(t.readers.email))])]),a("p",[t._v("Członek biblioteki od: "),a("span",{staticStyle:{"font-weight":"bold",color:"#008D18"}},[t._v(t._s(t.readers.created_at.slice(0,10)))])]),a("p",[t._v("Numer karty czytelniczej: "),a("span",{staticStyle:{"font-weight":"bold",color:"#008D18"}},[t._v(t._s(t.readers.readers.card_number))])]),"0"===t.readers.readers.can_extend?a("p",[t._v("Termin przedłużenia książki: "),a("span",{staticStyle:{"font-weight":"bold",color:"red"}},[t._v("WYKORZYSTANO")])]):a("p",[t._v("Termin przedłużenia książki: "),a("span",{staticStyle:{"font-weight":"bold",color:"#008D18"}},[t._v("MOŻNA PRZEDŁUŻYĆ")])])],1)],1),a("v-divider"),this.$route.params.user_id.toString()===this.authId.toString()?a("v-row",{staticStyle:{"margin-left":"10px","margin-right":"10px","justify-content":"center"}},[a("ProfileTabs",{attrs:{user_id:t.user_id}})],1):t._e()],1)},Ya=[],Va=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",{staticStyle:{"margin-left":"10px","margin-right":"10px","justify-content":"center","padding-bottom":"10px"}},[a("div",{staticClass:"d-flex justify-center align-center"},[a("v-tabs",{attrs:{color:"#008D18","icons-and-text":"",centered:""}},t._l(t.items,(function(e){return a("v-tab",{key:e.title,staticStyle:{"text-decoration":"none"},attrs:{color:"indigo",to:e.route}},[t._v(" "+t._s(e.title)+" "),a("v-icon",[t._v(t._s(e.icon))])],1)})),1)],1)]),a("v-divider"),a("v-row",{staticStyle:{"justify-content":"center"}},[a("router-view")],1)],1)},Ja=[],Xa={name:"ProfileTabs",props:["user_id"],data(){return{items:[{title:"WYPOŻYCZENIA",route:`/profile/${this.user_id}/borrows`,icon:"mdi-book-multiple"},{title:"KARY I OPŁATY",route:`/profile/${this.user_id}/delays`,icon:"mdi-cash-minus"},{title:"STATYSTYKI",route:`/profile/${this.user_id}/statistics`,icon:"mdi-chart-bar"},{title:"OBSERWOWANI",route:`/profile/${this.user_id}/follows`,icon:"mdi-heart"},{title:"ZASUGERUJ",route:`/profile/${this.user_id}/suggestions`,icon:"mdi-lightbulb-on"}]}},computed:{readers(){return this.$store.getters.getReaders}},created(){this.$store.dispatch("fetchOneReader",this.user_id)},methods:{}},Qa=Xa,ts=Object(y["a"])(Qa,Va,Ja,!1,null,null,null),es=ts.exports,as={name:"Profile",props:["user_id"],components:{ProfileTabs:es},data:()=>({defaultButtonText:"Wgraj awatar",avatar:null,valid:!1,form1:!1,photoRules:[t=>!t||t.size<2e6||"Zdjęcie powinno mieć poniżej 5MB!"]}),computed:{readers(){return this.$store.getters.getReaders},buttonText(){return this.selectedFile?this.selectedFile.name:this.defaultButtonText},authId(){return this.$store.getters.authId}},created(){this.$store.dispatch("fetchOneReader",this.user_id)},methods:{validate(){if(this.$refs.form.validate()){const t=this.avatar,e=new FormData;e.append("avatar",t),e.append("user_id",parseInt(this.user_id)),axios.post("/api/user/profile/upload",e).then(t=>{1==t.data.success?this.$swal("Zmieniono","Pomyślnie zmieniono awatar!","success"):this.$swal("Błąd","Zmiana awataru zakończyła się niepowodzeniem!","error")}).catch(t=>{console.log(t)}),this.$store.dispatch("fetchOneReader",this.user_id)}}}},ss=as,is=Object(y["a"])(ss,Ha,Ya,!1,null,null,null),os=is.exports,rs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",staticStyle:{width:"100%"},attrs:{headers:t.headers,search:t.search,items:t.borrows,"sort-by":"title"},scopedSlots:t._u([{key:"item.fullName",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.name)+" "+t._s(a.surname)+" ")]}},{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Wypożyczenia")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"mr-3",attrs:{"append-icon":"mdi-magnify",label:"Szukaj","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer")],1)]},proxy:!0},{key:"item.actions",fn:function(e){var s=e.item;return[a("v-btn",{staticClass:"mr-2",attrs:{color:"success"},on:{click:function(e){return t.extendDate(s)}}},[t._v(" Przedłuż termin ")])]}},{key:"no-data",fn:function(){return[a("p",{staticClass:"pt-5"},[t._v("Brak wypożyczeń")])]},proxy:!0},{key:"item.returns_date",fn:function(e){var s=e.item;return[a("v-chip",{attrs:{color:t.getColor(s.returns_date),dark:""}},[t._v(t._s(s.returns_date))])]}}],null,!0)})},ns=[],ls={name:"UserBorrows",props:["user_id"],data:()=>({search:"",headers:[{text:"Tytuł książki",align:"start",value:"title"},{text:"Autor",value:"fullName"},{text:"Wypożyczenie",value:"borrows_date"},{text:"Termin zwrotu",value:"returns_date"},{text:"Akcje",value:"actions",sortable:!1}]}),computed:{readers(){return this.$store.getters.getReaders},borrows(){return this.$store.getters.getBorrows}},created(){this.$store.dispatch("fetchOneReader",this.user_id),this.$store.dispatch("fetchSpecificBorrow",this.user_id)},methods:{extendDate(t){this.$swal({title:"Czy jesteś pewien, że chcesz przedłużyć termin tej książki?",text:"Przedłużyć można jedną książkę o 7 dni przez okres 30 dni.",icon:"warning",showCancelButton:!0,confirmButtonText:"Przedłuż",confirmButtonColor:"#5cb85c",cancelButtonColor:"#d9534f",cancelButtonText:"Anuluj"}).then(e=>{e.value&&(o.a.put("/api/borrow/extend/"+t.id,{}).then(t=>{this.$swal("Przedłużono","Termin oddania książki został pomyślnie przedłużony!","success")}).catch(t=>{this.$swal("Błąd","Możliwość przedłużenia została już użyta! Oddaj tę książkę by móc skorzystać z przedłużenia!","error")}),this.$store.dispatch("fetchSpecificBorrow",this.user_id))})},getColor(t){const e=new Date,a=new Date(t),s=a.getTime()-e.getTime(),i=Math.round(s/864e5);return i>30?"blue":"green"}}},ds=ls,cs=Object(y["a"])(ds,rs,ns,!1,null,null,null),us=cs.exports,ms=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",staticStyle:{width:"100%"},attrs:{headers:t.headers,search:t.search,items:t.delays,"sort-by":"title"},scopedSlots:t._u([{key:"item.fullName",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.name)+" "+t._s(a.surname)+" ")]}},{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Opóźnienia i kary")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"mr-3",attrs:{"append-icon":"mdi-magnify",label:"Szukaj","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer")],1)]},proxy:!0},{key:"no-data",fn:function(){return[a("p",{staticClass:"pt-5"},[t._v("Brak opóźnień")])]},proxy:!0}],null,!0)})},ps=[],hs={name:"UserDelays",props:["user_id"],data:()=>({delays:[],search:"",headers:[{text:"Tytuł książki",align:"start",value:"title"},{text:"Autor",value:"fullName"},{text:"Opóźnienie (dni)",value:"delay"},{text:"Kara pieniężna (zł)",value:"penalty"}]}),computed:{readers(){return this.$store.getters.getReaders},borrows(){return this.$store.getters.getBorrows}},created(){this.$store.dispatch("fetchOneReader",this.user_id),this.$store.dispatch("fetchSpecificDelay",this.user_id)},methods:{}},vs=hs,fs=Object(y["a"])(vs,ms,ps,!1,null,null,null),gs=fs.exports,bs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-carousel",{staticStyle:{width:"800px"},attrs:{"hide-delimiters":"","show-arrows-on-hover":""}},[a("v-carousel-item",[a("BorrowsAmount",{attrs:{user_id:t.user_id}})],1),a("v-carousel-item",[a("FavoriteAuthor",{attrs:{user_id:t.user_id}})],1),a("v-carousel-item",[a("FavoriteCategory",{attrs:{user_id:t.user_id}})],1),a("v-carousel-item",[a("RatingsAmount",{attrs:{user_id:t.user_id}})],1)],1)],1)},ys=[],ws=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("apexchart",{ref:"realtimeChart",attrs:{width:"800",type:"bar",options:t.options,series:t.series}})],1)},ks=[],xs={name:"BorrowsAmount",props:["user_id"],data(){return{borrows:[],options:{xaxis:{categories:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"]},title:{text:"Zestawienie wypożyczeń",align:"center",floating:!0},subtitle:{text:"Ilość wypożyczeń w danym miesiącu",align:"center"},chart:{toolbar:{show:!1}}},series:[{name:"borrowsAmount",data:[]}]}},created(){o.a.get("/api/borrow/getAmount/"+this.user_id).then(t=>{for(let e=1;e<=12;e++)this.series[0].data.push(t.data[e]);this.updateSeriesLine()})},methods:{updateSeriesLine(){this.$refs.realtimeChart.updateSeries([{data:this.series[0].data}],!1,!0)}}},_s=xs,js=Object(y["a"])(_s,ws,ks,!1,null,null,null),zs=js.exports,Cs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("apexchart",{ref:"realtimeChart",attrs:{type:"pie",width:"600",options:t.options,series:t.series}})],1)},Is=[],$s={name:"FavoriteAuthor",props:["user_id"],data(){return{borrows:[],options:{title:{text:"Ulubiony autor",align:"right",floating:!0},legend:{position:"right",offsetY:80},chart:{toolbar:{show:!1},width:500,type:"pie"},labels:[],responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"right",offsetY:0,height:230}}}]},series:[]}},created(){o.a.get("/api/borrow/getAuthors/"+this.user_id).then(t=>{for(let e=0;e<t.data.length;e++)this.options.labels[e]=`${t.data[e].name} ${t.data[e].surname}`,this.series[e]=parseInt(t.data[e].count,10);this.updateSeriesLine()})},methods:{updateSeriesLine(){this.$refs.realtimeChart.updateSeries([{data:this.series}],!1,!0)}}},Ss=$s,Rs=Object(y["a"])(Ss,Cs,Is,!1,null,null,null),Bs=Rs.exports,Ds=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("apexchart",{ref:"realtimeChart",attrs:{type:"pie",width:"600",options:t.options,series:t.series}})],1)},As=[],Ts={name:"FavoriteCategory",props:["user_id"],data(){return{borrows:[],options:{title:{text:"Preferowana kategoria",align:"right",floating:!0},legend:{position:"right",offsetY:80},chart:{toolbar:{show:!1},width:500,type:"pie"},labels:[],responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"right",offsetY:0,height:230}}}]},series:[]}},created(){o.a.get("/api/borrow/getCategory/"+this.user_id).then(t=>{for(let e=0;e<t.data.length;e++)this.options.labels[e]=""+t.data[e].name,this.series[e]=parseInt(t.data[e].count,10);this.updateSeriesLine()})},methods:{updateSeriesLine(){this.$refs.realtimeChart.updateSeries([{data:this.series}],!1,!0)}}},Es=Ts,Ps=Object(y["a"])(Es,Ds,As,!1,null,null,null),Os=Ps.exports,Ns=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("apexchart",{ref:"realtimeChart",attrs:{width:"800",type:"bar",options:t.options,series:t.series}})],1)},Ws=[],Ls={name:"RatingsAmount",props:["user_id"],data(){return{borrows:[],options:{xaxis:{categories:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"]},title:{text:"Zestawienie ocen",align:"center",floating:!0},subtitle:{text:"Ilość ocenionych książek w danym miesiącu",align:"center"},chart:{toolbar:{show:!1}}},series:[{name:"ratingsAmount",data:[]}]}},created(){o.a.get("/api/rating/ratingsAmount/"+this.user_id).then(t=>{for(let e=1;e<=12;e++)this.series[0].data.push(t.data[e]);this.updateSeriesLine()})},methods:{updateSeriesLine(){this.$refs.realtimeChart.updateSeries([{data:this.series[0].data}],!1,!0)}}},Us=Ls,Zs=Object(y["a"])(Us,Ns,Ws,!1,null,null,null),qs=Zs.exports,Fs={name:"Statistics",props:["user_id"],components:{BorrowsAmount:zs,FavoriteAuthor:Bs,FavoriteCategory:Os,RatingsAmount:qs},data(){return{model:0}}},Ms=Fs,Gs=Object(y["a"])(Ms,bs,ys,!1,null,null,null),Ks=Gs.exports,Hs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{staticStyle:{"justify-content":"center","text-align":"center"}},[this.follows?a("v-col",{staticStyle:{"padding-top":"25px"},attrs:{md:"12"}},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"400",tile:""}},[a("v-list",{attrs:{rounded:""}},[a("v-subheader",[t._v("Obserwowani autorzy")]),a("v-list-item-group",[a("v-list-item",{attrs:{items:t.follows}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-account")])],1),a("v-list-item-content",[t.follows.id?a("router-link",{staticStyle:{"text-decoration":"none",color:"#008D18"},attrs:{to:{name:"authorview",params:{author_id:t.follows.id}}}},[a("v-list-item-title",{staticStyle:{"font-weight":"bold"},domProps:{textContent:t._s(t.follows.name+" "+t.follows.surname)}})],1):t._e()],1),a("v-list-item-action",[a("v-btn",{attrs:{"x-large":"",icon:""}},[a("v-icon",{attrs:{color:"red lighten-1"},on:{click:function(e){return t.removeAuthor(t.follows)}}},[t._v("mdi-close")])],1)],1)],1)],1)],1)],1)],1):a("v-col",{staticStyle:{"padding-top":"25px"}},[a("h1",[t._v("Obserwowani autorzy: brak")])])],1)},Ys=[],Vs={name:"Follows",props:["user_id"],data:()=>({followedAuthors:[]}),computed:{follows(){return this.$store.getters.getFollows}},created(){this.$store.dispatch("fetchFollowedAuthors",this.user_id)},methods:{removeAuthor(t){this.$swal({title:"Czy jesteś pewien, że chcesz usunąć tego autora z listy obserwowanych?",icon:"question",showCancelButton:!0,confirmButtonText:"Usuń",cancelButtonText:"Anuluj"}).then(e=>{e.value?(o.a.delete(`/api/follow/delete/${t.id}/author`,{}),this.$swal("Usunięto","Pomyślnie usunięto autora z listy obserwowanych","success")):this.$swal("Anulowano","Akcja została anulowana","info"),this.$store.dispatch("fetchFollowedAuthors",this.user_id)})}}},Js=Vs,Xs=Object(y["a"])(Js,Hs,Ys,!1,null,null,null),Qs=Xs.exports,ti=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",{ref:"form",staticStyle:{border:"1px solid black",padding:"25px","text-align":"center"},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-select",{attrs:{items:t.items,rules:[function(t){return!!t||"Rodzaj jest wymagany!"}],label:"Rodzaj sugestii",required:""},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}}),a("v-textarea",{attrs:{autocomplete:"Opis",rules:t.descriptionRules,label:"Opis sugestii",required:""},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),a("v-checkbox",{attrs:{rules:[function(t){return!!t||"Aby kontynuować musisz zaznaczyć pole!"}],label:"Zgadzam się na przetwarzanie moich danych osobowych",required:""},model:{value:t.checkbox,callback:function(e){t.checkbox=e},expression:"checkbox"}}),a("v-btn",{staticClass:"mr-4",attrs:{disabled:!t.valid,color:"success"},on:{click:t.validate}},[t._v(" Wyślij ")])],1)},ei=[],ai={data:()=>({valid:!0,description:"",descriptionRules:[t=>!!t||"Opis jest wymagany!",t=>t.length>=40||"Opis jest za krótki!"],select:null,items:["Nowa pozycja książkowa","Nowa funkcja","Błąd na stronie","Inne"],checkbox:!1}),methods:{validate(){this.$refs.form.validate()&&o.a.post("/api/suggestions/add",{type:this.select,description:this.description}).then(t=>{!0===t.data.success?this.$swal("Dodano","Pomyślnie zgłoszono nową sugestię! Dziękujemy!","success"):this.$swal("Błąd","Coś poszło nie tak...","error")}).catch(t=>{console.log(t)}),this.$refs.form.reset()}}},si=ai,ii=Object(y["a"])(si,ti,ei,!1,null,null,null),oi=ii.exports,ri=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{staticClass:"justify-center justify-md-center align-center"},[a("v-dialog",{attrs:{"max-width":"600"},model:{value:t.firstLoginDialog,callback:function(e){t.firstLoginDialog=e},expression:"firstLoginDialog"}},[a("v-card",{staticStyle:{overflow:"hidden"}},[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("h1",{staticClass:"pt-5",staticStyle:{"text-align":"center"}},[t._v("Witamy na stronie biblioteki!")]),a("p",{staticClass:"pt-5 pb-2",staticStyle:{"text-align":"center"}},[t._v("W związku z Twoim pierwszym logowaniem, prosimy o zmianę hasła.")]),a("v-divider",{staticClass:"pt-5"}),a("v-text-field",{staticClass:"pa-5 pb-0 pt-0",attrs:{rules:t.emailRules,label:"E-mail",outlined:"",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{staticClass:"pa-5 pb-0 pt-0",attrs:{rules:t.cardNumberRules,label:"Numer karty bibliotecznej",outlined:"",required:""},model:{value:t.card_number,callback:function(e){t.card_number=e},expression:"card_number"}}),a("v-text-field",{staticClass:"pa-5 pb-0 pt-0",attrs:{value:t.password,label:"Hasło",type:"password",rules:[t.rules.password],outlined:"",required:""},on:{input:function(e){return t.password=e}}}),a("v-text-field",{staticClass:"pa-5 pt-0",attrs:{value:t.passwordConfirmation,label:"Powtórz hasło",type:"password",rules:t.confirmPasswordRules.concat(t.passwordConfirmationRule),outlined:"",required:""},model:{value:t.passwordConfirmation,callback:function(e){t.passwordConfirmation=e},expression:"passwordConfirmation"}}),a("v-row",{staticClass:"pb-5 justify-center"},[a("v-btn",{staticClass:"mr-5 mb-6",attrs:{disabled:!t.valid,color:"#008D18"},on:{click:t.validate}},[t._v(" Zmień hasło ")]),a("v-btn",{staticClass:"mr-5 mb-6",attrs:{color:"#808080"},on:{click:t.reset}},[t._v(" Wyczyść dane ")])],1)],1)],1)],1)],1)},ni=[],li={name:"FirstLogin",data(){return{firstLoginDialog:!0,password:"",card_number:"",valid:!0,value:!0,passwordConfirmation:"",email:"",rules:{required:t=>!!t||"Hasło jest wymagane",password:t=>{const e=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})/;return e.test(t)||"8 znaków, co najmniej jedna wielka litera, cyfra oraz znak specjalny"}},confirmPasswordRules:[t=>!!t||"Potwierdzenie hasła jest wymagane"],cardNumberRules:[t=>!!t||"Numer karty bibliotecznej jest wymagany!",t=>/^\d+$/.test(t)||"Numer karty bibliotecznej musi być prawidłowy",t=>10===t.length||"Numer karty bibliotecznej powinien zawierać 10 cyfr"],emailRules:[t=>!!t||"E-mail jest wymagany",t=>/.+@.+\..+/.test(t)||"E-mail musi być prawidłowy"]}},computed:{passwordConfirmationRule(){return()=>this.password===this.passwordConfirmation||"Hasło musi być takie same"}},methods:{validate(){if(this.$refs.form.validate()){const t={card_number:this.card_number,password:this.password,passwordConfirmation:this.passwordConfirmation,email:this.email};this.$store.dispatch("firstLogin",t).catch(t=>{this.$swal("Błąd","Podano błędne dane.","error"),console.log(t)})}},reset(){this.$refs.form.reset()}}},di=li,ci=Object(y["a"])(di,ri,ni,!1,null,null,null),ui=ci.exports,mi=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"reset"},[s("v-container",[s("v-row",{staticClass:"justify-center justify-md-center align-center"},[s("v-row",{staticClass:"justify-lg-end justify-sm-center pr-5 d-none d-sm-flex col-md-5"},[s("v-img",{staticClass:"shrink",attrs:{alt:"App Logo",contain:"",src:a("6f0f")}})],1),s("v-divider",{attrs:{vertical:""}}),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-card",{staticClass:"ma-2",attrs:{"max-width":"600"}},[s("v-form",{ref:"form",attrs:{md:"7"},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("h1",{staticClass:"pt-8",staticStyle:{"text-align":"center"}},[t._v("Biblioteka")]),s("h2",{staticClass:"pt-2 pb-5",staticStyle:{"text-align":"center"}},[t._v("Resetowanie hasła")]),s("v-text-field",{staticClass:"pa-5 pb-0 pt-5",attrs:{rules:t.emailRules,label:"E-mail",outlined:"",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),s("v-row",{staticClass:"pb-5 justify-center",attrs:{id:"buttons"}},[s("v-btn",{staticClass:"white--text mr-5 mb-6 font-weight-bold",attrs:{disabled:!t.valid,color:"#008D18"},on:{click:t.validate}},[t._v(" Resetuj hasło ")]),s("v-btn",{staticClass:"white--text mr-5 mb-6 font-weight-bold",attrs:{color:"#808080"},on:{click:t.reset}},[t._v(" Wyczyść dane ")])],1)],1)],1)],1)],1)],1)],1)},pi=[],hi={name:"PasswordReset",data(){return{valid:!1,value:!0,email:"",emailRules:[t=>!!t||"E-mail jest wymagany",t=>/.+@.+\..+/.test(t)||"E-mail musi być prawidłowy"]}},methods:{validate(){this.$refs.form.validate()&&o.a.post("/api/password-reset",{email:this.email}).then(()=>{const t=this.$swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,didOpen:t=>{t.addEventListener("mouseenter",this.$swal.stopTimer),t.addEventListener("mouseleave",this.$swal.resumeTimer)}});t.fire({icon:"success",title:"E-mail został wysłany!"})}).catch(()=>{this.$swal("Błąd","Użytkownik o podanym e-mailu nie istnieje!","error")})},reset(){this.$refs.form.reset()}}},vi=hi,fi=(a("cdce"),Object(y["a"])(vi,mi,pi,!1,null,"c03772fa",null)),gi=fi.exports,bi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"newpassword"},[a("v-container",[a("v-row",{staticClass:"justify-center justify-md-center align-center"},[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-card",{staticClass:"ma-2",attrs:{"max-width":"600"}},[a("v-form",{ref:"form",attrs:{md:"6"},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("h1",{staticClass:"pt-8",staticStyle:{"text-align":"center"}},[t._v("Biblioteka")]),a("h2",{staticClass:"pt-2",staticStyle:{"text-align":"center"}},[t._v("Tworzenie nowego hasła")]),a("hr"),a("v-text-field",{staticClass:"pa-5 pb-0 pt-0",attrs:{value:t.password,label:"Hasło",type:"password",rules:[t.rules.password],outlined:"",required:""},on:{input:function(e){return t.password=e}}}),a("v-text-field",{staticClass:"pa-5 pt-0",attrs:{value:t.password_confirmation,label:"Powtórz hasło",type:"password",rules:t.confirmPasswordRules.concat(t.passwordConfirmationRule),outlined:"",required:""},model:{value:t.password_confirmation,callback:function(e){t.password_confirmation=e},expression:"password_confirmation"}}),a("v-row",{staticClass:"pb-5 justify-center"},[a("v-btn",{staticClass:"mr-5 mb-6",attrs:{disabled:!t.valid,color:"brown"},on:{click:t.validate}},[t._v(" Zmień hasło ")]),a("v-btn",{staticClass:"mr-5 mb-6",attrs:{color:"orange"},on:{click:t.reset}},[t._v(" Wyczyść dane ")])],1)],1)],1)],1)],1)],1)],1)},yi=[],wi={name:"NewPassword",props:["user_id"],data(){return{valid:!1,value:!0,password:"",password_confirmation:"",rules:{required:t=>!!t||"Hasło jest wymagane",password:t=>{const e=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})/;return e.test(t)||"8 znaków, co najmniej jedna wielka litera, cyfra oraz znak specjalny"}},confirmPasswordRules:[t=>!!t||"Potwierdzenie hasła jest wymagane"]}},methods:{validate(){this.$refs.form.validate()&&o.a.post("/api/password-change",{user_id:this.$route.params.user_id,password:this.password,password_confirmation:this.password_confirmation}).then(()=>{const t=this.$swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,didOpen:t=>{t.addEventListener("mouseenter",this.$swal.stopTimer),t.addEventListener("mouseleave",this.$swal.resumeTimer)}});t.fire({icon:"success",title:"Zmieniono hasło!"})}).catch(t=>{console.log(t)})},reset(){this.$refs.form.reset()}},computed:{passwordConfirmationRule(){return()=>this.password===this.password_confirmation||"Hasło musi być takie same"}}},ki=wi,xi=Object(y["a"])(ki,bi,yi,!1,null,"df38967a",null),_i=xi.exports,ji=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("v-card",[s("v-row",{staticStyle:{"justify-content":"center"}},[s("v-card-title",[t._v("Ranking oraz statystyki na miesiąc '"),s("strong",[t._v(t._s((new Date).toLocaleString("default",{month:"long"}))+" ")]),t._v("'")])],1),s("v-row",{staticStyle:{"justify-content":"center"}},[s("v-col",{attrs:{cols:"4"}},[s("v-img",{attrs:{width:"600px",src:a("6fba"),height:"300px",dark:""}})],1)],1),s("v-divider")],1),s("v-card",[s("v-row",{staticStyle:{"justify-content":"center"}},[s("v-col",{attrs:{cols:"4"}},[s("v-list",[s("v-toolbar-title",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("Wypożyczenia")])]),s("v-subheader",{staticStyle:{"justify-content":"space-between"}},[s("p",[t._v("Pozycja")]),s("p",[t._v("Ilość wypożyczeń")])]),s("v-list-item-group",[t._l(t.borrows,(function(e,a){return[s("v-list-item",{key:e.id},["up"===e.status?s("v-list-item-icon",[s("v-icon",{attrs:{color:"green"}},[t._v("mdi-arrow-up-bold")]),s("strong",{staticStyle:{"margin-top":"3px","margin-left":"5px"},domProps:{textContent:t._s(e.position)}})],1):t._e(),"down"===e.status?s("v-list-item-icon",[s("v-icon",{attrs:{color:"red"}},[t._v("mdi-arrow-down-bold")]),s("strong",{staticStyle:{"margin-top":"3px","margin-left":"5px"},domProps:{textContent:t._s(e.position)}})],1):t._e(),"same"===e.status?s("v-list-item-icon",[s("v-icon",{attrs:{color:"blue"}},[t._v("mdi-minus")]),s("strong",{staticStyle:{"margin-top":"3px","margin-left":"5px"},domProps:{textContent:t._s(e.position)}})],1):t._e(),"new"===e.status?s("v-list-item-icon",[s("v-icon",{attrs:{color:"yellow"}},[t._v("mdi-star")]),s("strong",{staticStyle:{"margin-top":"3px","margin-left":"5px"},domProps:{textContent:t._s(e.position)}})],1):t._e(),s("v-list-item-avatar",[s("v-img",{attrs:{src:"https://library-site.s3.eu-north-1.amazonaws.com/avatars/"+e.avatar}})],1),s("v-list-item-content",{staticStyle:{"padding-left":"10px"}},[s("v-list-item-title",{domProps:{textContent:t._s(e.name+" "+e.surname)}}),s("v-list-item-subtitle",{domProps:{innerHTML:t._s("Miejsce "+ ++a)}})],1),s("v-list-item-action",[s("v-list-item-title",{domProps:{textContent:t._s(e.count)}})],1)],1)]}))],2)],1)],1),s("v-divider",{attrs:{vertical:""}}),s("v-col",{staticStyle:{"margin-left":"25px","margin-right":"25px"},attrs:{cols:"3"}},[s("v-toolbar-title",{staticStyle:{"text-align":"center","padding-bottom":"10px"}},[t._v("W tym miesiącu dołączyło")]),s("h1",{staticStyle:{"text-align":"center",color:"#008D18"}},[s("strong",[t._v(t._s(t.readers))])]),s("v-toolbar-title",{staticStyle:{"text-align":"center","padding-top":"10px"}},[t._v("czytelników")]),s("v-divider"),s("v-toolbar-title",{staticStyle:{"text-align":"center","padding-bottom":"10px"}},[t._v("W tym miesiącu dodano")]),s("h1",{staticStyle:{"text-align":"center",color:"#008D18"}},[s("strong",[t._v(t._s(t.books))])]),s("v-toolbar-title",{staticStyle:{"text-align":"center","padding-top":"10px"}},[t._v("nowych książek")])],1),s("v-divider",{attrs:{vertical:""}}),s("v-col",{attrs:{cols:"4"}},[s("v-list",[s("v-toolbar-title",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("Recenzje")])]),s("v-subheader",{staticStyle:{"justify-content":"end"}},[s("p",[t._v("Ilość recenzji")])]),s("v-list-item-group",[t._l(t.ratings,(function(e,a){return[s("v-list-item",{key:e.id},[s("v-list-item-avatar",[s("v-img",{attrs:{src:"https://library-site.s3.eu-north-1.amazonaws.com/avatars/"+e.avatar}})],1),s("v-list-item-content",{staticStyle:{"padding-left":"10px"}},[s("v-list-item-title",{domProps:{textContent:t._s(e.name+" "+e.surname)}}),s("v-list-item-subtitle",{domProps:{innerHTML:t._s("Miejsce "+ ++a)}})],1),s("v-list-item-action",[s("v-list-item-title",{domProps:{textContent:t._s(e.count)}})],1)],1)]}))],2)],1)],1)],1)],1)],1)},zi=[],Ci={data:()=>({books:[],readers:[]}),computed:{borrows(){return this.$store.getters.getBorrows},ratings(){return this.$store.getters.getRatings}},created(){this.$store.dispatch("fetchMonth",{}),this.$store.dispatch("fetchMonthRating",{})},methods:{setDataBooks(t){this.books=t,o.a.get("/api/reader/get/monthly").then(t=>{this.setDataReaders(t.data)})},setDataReaders(t){this.readers=t}},beforeRouteEnter(t,e,a){o.a.get("/api/book/monthly/get/all").then(t=>{a(e=>e.setDataBooks(t.data))})}},Ii=Ci,$i=Object(y["a"])(Ii,ji,zi,!1,null,null,null),Si=$i.exports,Ri=a("6426"),Bi=a("2f62"),Di=a("0e44"),Ai=a("04e1"),Ti=a.n(Ai),Ei={state:{status:"",token:localStorage.getItem("access_token")||"",loggedUser:{id:"",is_admin:"",id_number:"",card_number:""}},mutations:{auth_request(t){t.status="loading"},auth_success(t,e){t.status="success",t.token=e,t.loggedUser={id:Ti()(e).user_id,is_admin:Ti()(e).is_admin,id_number:Ti()(e).id_number,card_number:Ti()(e).card_number}},auth_error(t){t.status="error"},logout(t){t.status="",t.token="",t.loggedUser={id:null,is_admin:null,id_number:null,card_number:null}}},actions:{login({commit:t},e){return new Promise((a,s)=>{t("auth_request"),10===e.login.length?o()({method:"POST",url:"/api/loginReader",data:{card_number:e.login,password:e.password}}).then(s=>{const i=s.data.access_token;e=s.data,localStorage.setItem("access_token",i),o.a.defaults.headers.Authorization="Bearer "+i,t("auth_success",i),Qi.push("/"),a(s)}).catch(e=>{t("auth_error"),localStorage.removeItem("access_token"),s(e)}):o()({method:"POST",url:"/api/loginWorker",data:{id_number:e.login,password:e.password}}).then(s=>{const i=s.data.access_token;e=s.data,localStorage.setItem("access_token",i),o.a.defaults.headers.Authorization="Bearer "+i,t("auth_success",i,e),Qi.push("/"),a(s)}).catch(e=>{t("auth_error"),localStorage.removeItem("access_token"),s(e)})})},userRegister({commit:t},e){return new Promise((a,s)=>{t("auth_request"),o()({method:"POST",url:"/api/register",data:e}).then(t=>{!0===t.data.success?""===e.id_number?Qi.push("/admin-panel/readers"):Qi.push("/admin-panel/workers"):alert("Użytkownik o podanym loginie już istnieje!"),a(t)}).catch(t=>{s(t)})})},logout({commit:t}){return new Promise(e=>{t("logout"),localStorage.removeItem("access_token"),delete o.a.defaults.headers.Authorization,e()})},firstLogin({commit:t},e){return new Promise((a,s)=>{t("auth_request"),o()({method:"POST",url:"/api/first-login-password",data:e}).then(t=>{!0===t.data.success?(alert("Pomyślnie zmieniono hasło! Zaloguj się ponownie!"),localStorage.removeItem("access_token"),delete o.a.defaults.headers.Authorization,Qi.push("/login")):alert("Coś poszło nie tak!"),a(t)}).catch(t=>{s(t)})})}},getters:{isLoggedIn:t=>t.token,authStatus:t=>t.status,loggedUser:t=>t.loggedUser,authId:t=>t.loggedUser.id}},Pi={state:{readers:[]},mutations:{setReaders(t,e){t.readers=e}},actions:{fetchReaders(t){o()({method:"GET",url:"/api/user/getReaders"}).then(e=>{t.commit("setReaders",e.data)}).catch(t=>{console.log(t)})},fetchOneReader(t,e){o()({method:"GET",url:"/api/user/profile/"+e}).then(e=>{t.commit("setReaders",e.data)}).catch(t=>{console.log(t)})},fetchMonthReaders(t){o()({method:"GET",url:"/api/reader/get/monthly"}).then(e=>{t.commit("setReaders",e.data)}).catch(t=>{console.log(t)})}},getters:{getReaders(t){return t.readers}}},Oi={state:{workers:[]},mutations:{setWorkers(t,e){t.workers=e}},actions:{fetchWorkers(t){o()({method:"GET",url:"/api/user/getWorkers"}).then(e=>{t.commit("setWorkers",e.data)}).catch(t=>{console.log(t)})}},getters:{getWorkers(t){return t.workers}}},Ni={state:{roles:[]},mutations:{setRoles(t,e){t.roles=e}},actions:{fetchRoles(t){o()({method:"GET",url:"/api/user/getRoles"}).then(e=>{t.commit("setRoles",e.data)}).catch(t=>{console.log(t)})}},getters:{getRoles(t){return t.roles}}},Wi={state:{publishers:[]},mutations:{setPublishers(t,e){t.publishers=e}},actions:{fetchPublishers(t){o()({method:"GET",url:"/api/publisher/getPublishers"}).then(e=>{t.commit("setPublishers",e.data)}).catch(t=>{console.log(t)})}},getters:{getPublishers(t){return t.publishers}}},Li={state:{categories:[]},mutations:{setCategories(t,e){t.categories=e}},actions:{fetchCategories(t){o()({method:"GET",url:"/api/category/getCategories"}).then(e=>{t.commit("setCategories",e.data)}).catch(t=>{console.log(t)})}},getters:{getCategories(t){return t.categories}}},Ui={state:{borrows:[]},mutations:{setBorrows(t,e){t.borrows=e}},actions:{borrowBooks(t,e){return new Promise((t,a)=>{o()({method:"POST",url:"/api/borrow/addBorrow",data:{reader_id:e.reader_id,book_id:e.book_id,borrows_date:e.borrows_date,isbn:e.isbn}}).then(e=>{!0===e.data.success&&Qi.push("/admin-panel/borrows"),t(e)}).catch(t=>{a(t)})})},fetchBorrows(t){o()({method:"GET",url:"/api/borrow/getBorrows"}).then(e=>{t.commit("setBorrows",e.data)}).catch(t=>{console.log(t)})},fetchDelays(t){o()({method:"GET",url:"/api/borrow/getDelayed"}).then(e=>{t.commit("setBorrows",e.data)}).catch(t=>{console.log(t)})},fetchHistory(t){o()({method:"GET",url:"/api/borrow/history"}).then(e=>{t.commit("setBorrows",e.data)}).catch(t=>{console.log(t)})},fetchSpecificBorrow(t,e){o()({method:"GET",url:"/api/borrow/showBorrow/"+e}).then(e=>{t.commit("setBorrows",e.data)}).catch(t=>{console.log(t)})},fetchSpecificDelay(t,e){o()({method:"GET",url:"/api/borrow/showDelay/"+e}).then(e=>{t.commit("setBorrows",e.data)}).catch(t=>{console.log(t)})},fetchMonth(t){o()({method:"GET",url:"/api/borrow/monthly"}).then(e=>{t.commit("setBorrows",e.data)}).catch(t=>{console.log(t)})}},getters:{getBorrows(t){return t.borrows}}},Zi={state:{books:[]},mutations:{setBooks(t,e){t.books=e}},actions:{fetchBooks(t){o()({method:"GET",url:"/api/book/getBooks"}).then(e=>{t.commit("setBooks",e.data)}).catch(t=>{console.log(t)})},fetchBooksISBN(t){o()({method:"GET",url:"/api/book/getBooks/isbn"}).then(e=>{t.commit("setBooks",e.data)}).catch(t=>{console.log(t)})},fetchAvailableBooks(t){o()({method:"GET",url:"/api/book/get/availableBooks"}).then(e=>{t.commit("setBooks",e.data)}).catch(t=>{console.log(t)})},fetchNewBooks(t){o()({method:"GET",url:"/api/book/getNewBooks"}).then(e=>{t.commit("setBooks",e.data)}).catch(t=>{console.log(t)})},fetchOneBook(t,e){o()({method:"GET",url:"/api/book/"+e}).then(e=>{t.commit("setBooks",e.data)}).catch(t=>{console.log(t)})},fetchAuthorBook(t,e){o()({method:"GET",url:`/api/author/${e}/books`}).then(e=>{t.commit("setBooks",e.data)}).catch(t=>{console.log(t)})},fetchMonthBooks(t){o()({method:"GET",url:"/api/book/monthly/get/all"}).then(e=>{t.commit("setBooks",e.data)}).catch(t=>{console.log(t)})}},getters:{getBooks(t){return t.books}}},qi={state:{authors:[]},mutations:{setAuthors(t,e){t.authors=e}},actions:{fetchAuthors(t){o()({method:"GET",url:"/api/author/getAuthors"}).then(e=>{t.commit("setAuthors",e.data)}).catch(t=>{console.log(t)})},fetchOneAuthor(t,e){o()({method:"GET",url:"/api/author/"+e}).then(e=>{t.commit("setAuthors",e.data)}).catch(t=>{console.log(t)})}},getters:{getAuthors(t){return t.authors}}},Fi={state:{types:[]},mutations:{setTypes(t,e){t.types=e}},actions:{fetchTypes(t){o()({method:"GET",url:"/api/calendar/type/getTypes"}).then(e=>{t.commit("setTypes",e.data)}).catch(t=>{console.log(t)})}},getters:{getTypes(t){return t.types}}},Mi={state:{events:[]},mutations:{setEvents(t,e){t.events=e}},actions:{fetchEvents(t){o()({method:"GET",url:"/api/calendar/event/getEvents"}).then(e=>{t.commit("setEvents",e.data)}).catch(t=>{console.log(t)})}},getters:{getEvents(t){return t.events}}},Gi={state:{ratings:[]},mutations:{setRatings(t,e){t.ratings=e}},actions:{fetchRatings(t,e){o()({method:"GET",url:"/api/rating/all/"+e}).then(e=>{t.commit("setRatings",e.data)}).catch(t=>{console.log(t)})},fetchMonthRating(t){o()({method:"GET",url:"/api/rating/monthly/get"}).then(e=>{t.commit("setRatings",e.data)}).catch(t=>{console.log(t)})}},getters:{getRatings(t){return t.ratings}}},Ki={state:{averages:[]},mutations:{setAverages(t,e){t.averages=e}},actions:{fetchAverage(t,e){o()({method:"GET",url:"/api/rating/"+e}).then(e=>{t.commit("setAverages",e.data.ratings)}).catch(t=>{console.log(t)})}},getters:{getAverages(t){return t.averages}}},Hi={state:{follows:[]},mutations:{setFollows(t,e){t.follows=e}},actions:{fetchFollowedAuthors(t,e){o()({method:"GET",url:"/api/follow/getFollowedAuthors/"+e}).then(e=>{t.commit("setFollows",e.data)}).catch(t=>{console.log(t)})}},getters:{getFollows(t){return t.follows}}},Yi={state:{suggestions:[]},mutations:{setSuggestions(t,e){t.suggestions=e}},actions:{fetchSuggestions(t){o()({method:"GET",url:"/api/suggestions/getSuggestions"}).then(e=>{t.commit("setSuggestions",e.data)}).catch(t=>{console.log(t)})}},getters:{getSuggestions(t){return t.suggestions}}};s["default"].use(Bi["a"]);var Vi=new Bi["a"].Store({modules:{auth:Ei,readers:Pi,workers:Oi,roles:Ni,publishers:Wi,categories:Li,borrows:Ui,books:Zi,authors:qi,types:Fi,events:Mi,ratings:Gi,averages:Ki,follows:Hi,suggestions:Yi},plugins:[Object(Di["a"])()]});s["default"].use(L["a"]);const Ji=[{path:"/login",name:"login",component:G},{path:"/register-reader",name:"register-reader",component:it,meta:{requiresAuth:!0}},{path:"/register-worker",name:"register-worker",component:ct,meta:{requiresAuth:!0,is_admin:!0}},{path:"/",name:"main",component:X},{path:"/add-book",name:"add-book",component:ft,meta:{requiresAuth:!0}},{path:"/add-borrow",name:"add-borrow",component:xt,meta:{requiresAuth:!0}},{path:"/admin-panel",name:"admin-panel",component:$t,beforeEnter:(t,e,a)=>{""!==Vi.getters.loggedUser.id_number?a():s["default"].swal("Nieautoryzowany","Odmowa dostępu!","error")},meta:{requiresAuth:!0},children:[{path:"/admin-panel/readers",name:"readers",component:Tt},{path:"/admin-panel/workers",name:"workers",component:Lt,beforeEnter:(t,e,a)=>{!0===Vi.getters.loggedUser.is_admin?a():s["default"].swal("Nieautoryzowany","Odmowa dostępu!","error")}},{path:"/admin-panel/roles",name:"roles",component:Gt,beforeEnter:(t,e,a)=>{!0===Vi.getters.loggedUser.is_admin?a():s["default"].swal("Nieautoryzowany","Odmowa dostępu!","error")}},{path:"/admin-panel/books",name:"books",component:Xt},{path:"/admin-panel/books-isbn",name:"books-isbn",component:ie},{path:"/admin-panel/authors",name:"authors",component:ce},{path:"/admin-panel/categories",name:"categories",component:fe},{path:"/admin-panel/publishers",name:"publishers",component:xe},{path:"/admin-panel/borrows-returns",name:"borrows-returns",component:$e},{path:"/admin-panel/borrows",name:"borrows",component:Te},{path:"/admin-panel/delays-penalties",name:"delays-penalties",component:Le},{path:"/admin-panel/calendar/events",name:"events",component:Ge},{path:"/admin-panel/calendar/types",name:"types",component:Xe},{path:"/admin-panel/suggestions",name:"suggestions",component:ia}]},{path:"/calendar",name:"calendar",component:ca},{path:"/search",name:"search",component:fa},{path:"/new",name:"new",component:_a},{path:"/book/:book_id",name:"bookview",component:Ka,props:!0},{path:"/author/:author_id",name:"authorview",component:Ea,props:!0},{path:"/profile/:user_id",name:"profile",component:os,props:!0,meta:{requiresAuth:!0},children:[{path:"/profile/:user_id/borrows",name:"userborrows",component:us,props:!0},{path:"/profile/:user_id/delays",name:"userdelays",component:gs,props:!0},{path:"/profile/:user_id/statistics",name:"statistics",component:Ks,props:!0,children:[{path:"/profile/:user_id/statistics/borrows",name:"borrowsamount",component:zs,props:!0},{path:"/profile/:user_id/statistics/authors",name:"favoriteauthors",component:Bs,props:!0},{path:"/profile/:user_id/statistics/categories",name:"favoritecategories",component:Os,props:!0},{path:"/profile/:user_id/statistics/ratings",name:"ratingsamount",component:qs,props:!0}]},{path:"/profile/:user_id/follows",name:"follows",component:Qs,props:!0},{path:"/profile/:user_id/suggestions",name:"usersuggestions",component:oi,props:!0}]},{path:"/first-login",name:"first-login",component:ui},{path:"/reset-password",name:"reset-password",component:gi},{path:"/new-password/:user_id",name:"new-password",component:_i},{path:"/ranking",name:"ranking",component:Si},{path:"*",name:"notfound",component:Ri["default"]}],Xi=new L["a"]({mode:"history",base:"/",routes:Ji});Xi.beforeEach((t,e,a)=>{t.matched.some(t=>t.meta.requiresAuth)?Vi.getters.isLoggedIn?t.matched.some(t=>t.meta.is_admin)?!0===Vi.getters.loggedUser.is_admin?a():s["default"].swal("Nieautoryzowany","Odmowa dostępu!","error"):a():a("/login"):a()});var Qi=Xi;a("5363"),a("bf40");a("f568"),o.a.defaults.baseURL="https://library-site.herokuapp.com",o.a.interceptors.request.use(t=>{const e=localStorage.getItem("access_token");return e&&(t.headers.Authorization="Bearer "+e),t.headers["Access-Control-Allow-Origin"]="*",t},t=>Promise.reject(t)),o.a.interceptors.response.use(t=>t,t=>{if(401!==t.response.status)return Promise.reject(t);"Token has expired"===t.response.data.message&&null!=localStorage.access_token&&(localStorage.removeItem("access_token"),s["default"].swal({title:"Sesja wygasła",text:"Za chwilę zostaniesz wylogowany",icon:"warning",allowOutsideClick:!1,confirmButtonText:"Rozumiem"}).then(t=>{t.value&&(s["default"].swal("Wylogowano","Pomyślnie wylogowano!","success"),delete o.a.defaults.headers.Authorization,Qi.push("/login"))}))}),s["default"].config.productionTip=!1,s["default"].use(l["a"]),s["default"].use(c.a),s["default"].use(n.a,o.a),s["default"].component("apexchart",c.a),new s["default"]({vuetify:W,router:Qi,store:Vi,render:t=>t(E)}).$mount("#app")},"6f0f":function(t,e,a){t.exports=a.p+"img/app_logo.8ce49673.png"},"6f49":function(t,e,a){},"6fba":function(t,e,a){t.exports=a.p+"img/winners_podium.d88834d3.jpg"},"71cd":function(t,e,a){"use strict";a("ef91")},"71dd":function(t,e,a){t.exports=a.p+"img/owl.0e58804f.png"},7493:function(t,e,a){},"7f6d":function(t,e,a){"use strict";a("8ddc")},"8ddc":function(t,e,a){},"998f":function(t,e,a){t.exports=a.p+"img/calendar.2cd29585.jpg"},"9b9e":function(t,e,a){"use strict";a("9fb8")},"9fb8":function(t,e,a){},ad8c:function(t,e,a){"use strict";a("7493")},b610:function(t,e,a){"use strict";a("3285")},cdce:function(t,e,a){"use strict";a("edc4")},d2cf:function(t,e,a){"use strict";a("03c7")},dcf6:function(t,e){},e98c:function(t,e,a){t.exports=a.p+"img/404error.8a4f1f09.jpg"},eabb:function(t,e,a){t.exports=a.p+"img/search_book.4ab04bdf.jpg"},edc4:function(t,e,a){},ef91:function(t,e,a){},f568:function(t,e,a){window._=a("2ef0");try{window.Popper=a("f0bd").default,window.$=window.jQuery=a("1157"),a("4989")}catch(s){}window.axios=a("bc3a"),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"},f7e3:function(t,e,a){t.exports=a.p+"img/ranking_podium.3c588cad.jpg"},f8f4:function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return i}));var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{staticClass:"text-center",attrs:{"fill-height":""}},[s("v-row",{attrs:{align:"center"}},[s("v-col",{attrs:{cols:"12"}},[s("v-img",{staticStyle:{width:"477px",height:"298px",display:"inline-block"},attrs:{src:a("e98c")}})],1),s("v-col",[s("v-btn",{attrs:{to:"/",color:"#008D18",outlined:""}},[t._v(" Zabierz mnie stąd! ")])],1)],1)],1)},i=[]},fb70:function(t,e,a){"use strict";var s=a("dcf6"),i=a.n(s);e["default"]=i.a}});
//# sourceMappingURL=app.2d1dcae0.js.map